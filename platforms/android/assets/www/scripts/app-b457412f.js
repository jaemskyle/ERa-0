/**
 * generator-cg-gas - Yeoman Generator for Enterprise Angular projects, with Gulp Angular Sass
 * @version v3.3.3
 * @link https://github.com/Lunatic83/generator-cg-gas
 * @license 
 */
angular.module("ERChart",["templates","ionic","LocalForageModule","firebase","mgcrea.ngStrap"]),angular.module("ERChart").config(["$stateProvider","$urlRouterProvider","$locationProvider","$localForageProvider",function($stateProvider,$urlRouterProvider,$locationProvider,$localForageProvider){$stateProvider.state("root",{url:"/a",templateUrl:"modules/partial/menu/menu.html",controller:"MenuCtrl","abstract":!0}),$stateProvider.state("login",{url:"/login",views:{"@":{templateUrl:"modules/partial/login/login.html",controller:"LoginCtrl"}}}),$stateProvider.state("signup",{url:"/signup",views:{"@":{templateUrl:"modules/partial/signup/signup.html",controller:"SignupCtrl"}}}),$stateProvider.state("forgot",{url:"/forgot",views:{"@":{templateUrl:"modules/partial/forgot/forgot.html",controller:"ForgotCtrl"}}}),$stateProvider.state("root.settings",{url:"/settings",views:{rootContent:{templateUrl:"modules/partial/settings/settings.html"}}}),$stateProvider.state("root.form",{url:"/form",views:{rootContent:{resolve:{isEditMode:function(){return!1}},templateUrl:"modules/partial/form/form.html",controller:"FormCtrl"}}}),$stateProvider.state("root.edit",{url:"/form/:formId",views:{rootContent:{resolve:{isEditMode:function(){return!0}},templateUrl:"modules/partial/form/form.html",controller:"FormCtrl"}}}),$stateProvider.state("root.home",{url:"/home",views:{rootContent:{templateUrl:"modules/partial/home/home.html",controller:"HomeCtrl"}}}),$urlRouterProvider.otherwise("/login"),$localForageProvider.setNotify(!0,!0),$localForageProvider.config({driver:window.localforage.LOCALSTORAGE,name:"ERa_",storeName:"ERaLocalStore",description:"ERa local data."})}]),angular.module("ERChart").run(["$rootScope","$state","$stateParams",function($rootScope,$state,$stateParams){$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.safeApply=function(fn){var phase=$rootScope.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}]),angular.module("ERChart").controller("MenuCtrl",["$scope","$firebaseAuth","$timeout","$state",function($scope,$firebaseAuth,$timeout,$state){var erfire=new Firebase("https://era.firebaseio.com/users");$scope.authObj=$firebaseAuth(erfire),$scope.logout=function(){console.log("should log out"),$scope.authObj.$unauth(),$timeout(function(){$state.go("login")})}}]),angular.module("ERChart").controller("LoginCtrl",["$scope","$timeout","$firebase","$firebaseAuth","$state",function($scope,$timeout,$firebase,$firebaseAuth,$state){var erfire=new Firebase("https://era.firebaseio.com/users"),erfiresync=$firebase(erfire).$asObject();$scope.authObj=$firebaseAuth(erfire);var authData=$scope.authObj.$getAuth();$scope.signup={},$scope.cred={},$scope.user={eruid:null},authData?(console.log("Already in as:",authData.uid),console.log(authData),$scope.user.eruid=authData.uid,console.log($scope.user),$timeout(function(){$state.go("default.home")})):console.log("Logged out"),$scope.login=function(){$state.go("root.home")},$scope.signup=function(){$scope.authObj.$createUser({email:$scope.signup.email,password:$scope.signup.pass}).then(function(userData){console.log("User "+userData.uid+" created successfully!");var newUser=(userData.uid,{_eruid:userData.uid,hospital:$scope.signup.hospital,name:$scope.signup.nom});return erfiresync.$add(newUser).then(function(ref){var id=ref.key();console.log("added record with id "+id),erfiresync.$indexFor(id),console.log(erfiresync)}),$scope.authObj.$authWithPassword({email:$scope.signup.email,password:$scope.signup.pass})}).then(function(authData){console.log("Logged in as:",authData.uid),$scope.user.eruid=authData.uid,console.log($scope.user),console.log(authData),$timeout(function(){$state.go("default.home")}),$scope.signup={}})["catch"](function(error){console.error("Error: ",error)})},$scope.logout=function(){console.log("should log out"),$scope.authObj.$unauth(),$timeout(function(){$state.go("root.login")})}}]),angular.module("ERChart").controller("SignupCtrl",["$scope",function(){}]),angular.module("ERChart").controller("ForgotCtrl",["$scope",function(){}]),angular.module("ERChart").controller("SettingsCtrl",["$scope",function(){}]),angular.module("ERChart").controller("FormCtrl",["$scope","cache","erutils","$state","isEditMode","$stateParams",function($scope,cache,erutils,$state,isEditMode){console.log($state),erutils.broadcastPageEvent(isEditMode?"isEdit":"isAdd"),$scope.print=function(){erutils.broadcastPageEvent("Print")},$scope.save=function(){$state.is("root.edit")?erutils.broadcastPageEvent("UpdateChart"):$state.is("root.form")&&erutils.broadcastPageEvent("SaveChart")},$scope.goHome=function(){erutils.broadcastPageEvent("GoHome")}}]),angular.module("ERChart").controller("EditCtrl",["$scope",function(){}]),angular.module("ERChart").controller("HomeCtrl",["$scope","cache","$interval","$state","$timeout",function($scope,cache,$interval,$state,$timeout){$scope.showListDelete=!1;var allExForms=[],init=function(){cache.getLocalData().then(function(getLocalDataSuccess){$scope.forms=getLocalDataSuccess.length?getLocalDataSuccess:allExForms})},syncScopeToLocal=function(){cache.writeLocalData(allExForms).then(function(){init()})},deleteItem=function(item,index){allExForms.length&&(allExForms.splice(index,1),syncScopeToLocal())},prepForDelete=function(item,index){cache.getLocalData().then(function(getLocalDataSuccess){getLocalDataSuccess.length&&(allExForms=getLocalDataSuccess,deleteItem(item,index))})},getLocalData=function(){cache.getLocalData().then(function(getLocalDataSuccess){getLocalDataSuccess&&(allExForms=getLocalDataSuccess,$scope.forms=getLocalDataSuccess)})};$scope.refresh=function(){getLocalData()},$scope.clearAll=function(){cache.clearAllCached(),$scope.forms=[]},$scope.canSwipeList=function(){return!0},$scope.deleteItem=function(item,index){index||1!==allExForms.length?prepForDelete(item,index):(allExForms=[],syncScopeToLocal())},$scope.editItem=function(form){$timeout(function(){$state.transitionTo("root.edit",{formId:form.id})})},init(),$scope.$on("CacheUpdate:Updated",function(){init()})}]),angular.module("ERChart").factory("cache",["$localForage","$rootScope",function($localForage,$rootScope){var cache={getStoreLength:function(){return $localForage.length()},getStoreKeys:function(){return $localForage.keys()},writeLocalData:function(data){return $localForage.setItem("ExForms",data)},getLocalData:function(){return $localForage.getItem("ExForms")},clearCachedItem:function(item){return $localForage.removeItem(item)},clearAllCached:function(){return $localForage.clear()},broadcastCacheEvent:function(eventType){console.log("broadcasting: "+eventType),$rootScope.$broadcast("CacheUpdate:"+eventType)}};return cache}]),angular.module("ERChart").factory("constants",function(){var constants={options:[{label:"not applicable",value:0},{label:"Abnormal",value:1},{label:"Normal",value:2}],heent:{cat_name:"heent",fields:[{name:"throat_clear",label:"Throat clear",model:"throatClear",note_toggle:!1,model_note:"throatClearNote",cat:"heent"},{name:"tm",label:"TM normal",model:"tm",note_toggle:!1,model_note:"tmNote",cat:"heent"},{name:"neck_supple",label:"Neck supple",model:"neckSupple",note_toggle:!1,model_note:"neckSuppleNote",cat:"heent"}],note:{name:"heent_note",label:"Heent Note",model:"heentNote",note_toggle:!1,cat:"heent"}},respiratory_exam:{cat_name:"respiratory_exam",fields:[{name:"good_bilat_a_e",label:"Good bilat A/E",model:"goodBilatA_E",note_toggle_flag:!1,model_note:"goodBilatAENote",cat:"respiratory_exam"},{name:"wheezing",label:"No Wheezing",model:"wheezing",note_toggle_flag:!1,model_note:"wheezingNote",cat:"respiratory_exam"},{name:"crackle",label:"No Crackle",model:"crackle",note_toggle_flag:!1,model_note:"crackleNote",cat:"respiratory_exam"}],note:{name:"respiratory_exam_note",label:"Respiratory Exam",model:"respiratoryExamNote",note_toggle_flag:!1,cat:"respiratory_exam"}},abdominal_exam:{cat_name:"abdominal_exam",fields:[{name:"soft_and_non_tender",label:"Soft and non tender",model:"softAndNonTender",note_toggle:!1,model_note:"softAndNonTenderNote",cat:"abdominal_exam"},{name:"bsp",label:"BSP",model:"bsp",note_toggle:!1,model_note:"bspNote",cat:"abdominal_exam"},{name:"mass",label:"No mass",model:"mass",note_toggle:!1,model_note:"massNote",cat:"abdominal_exam"},{name:"organomegaly",label:"No organomegaly",model:"organomegaly",note_toggle:!1,model_note:"organomegalyNote",cat:"abdominal_exam"},{name:"no_sign_of_peritonitis",label:"No sign of peritonitis",model:"noSignOfPeritonitis",note_toggle:!1,model_note:"noSignOfPeritonitisNote",cat:"abdominal_exam"},{name:"fpp_and_equal",label:"FPP and equal",model:"fppAndEqual",note_toggle:!1,model_note:"fppAndEqualNote",cat:"abdominal_exam"}],note:{name:"abdominal_exam_note",label:"Abdominal Exam Notes",model:"abdominalExamNote",note_toggle:!1,cat:"abdominal_exam"}},cardio_vascular:{cat_name:"cardio_vascular",fields:[{name:"s1_s2_present",label:"S1 and S2 present",model:"s1S2Present",note_toggle:!1,model_note:"s1S2PresentNote",cat:"cardio_vascular"},{name:"s3",label:"No S3",model:"s3",note_toggle:!1,model_note:"s3Note",cat:"cardio_vascular"},{name:"s4",label:"No S4",model:"s4",note_toggle:!1,model_note:"s4Note",cat:"cardio_vascular"},{name:"murmur",label:"No murmur",model:"murmur",note_toggle:!1,model_note:"murmurNote",cat:"cardio_vascular"},{name:"ppp",label:"PPP",model:"ppp",note_toggle:!1,model_note:"pppNote",cat:"cardio_vascular"},{name:"jvd",label:"No JVD",model:"jvd",note_toggle:!1,model_note:"jvdNote",cat:"cardio_vascular"}],note:{name:"cardio_vascular_note",label:"Cardio Vascular Note",model:"cardioVascularNote",note_toggle:!1,cat:"cardio_vascular"}},neurological_exam:{cat_name:"neurological_exam",fields:[{name:"cerebellum_exam",label:"Cerebellum Exam Normal",model:"cerebellumExam",note_toggle:!1,model_note:"cerebellumExamNormalNote",cat:"neurological_exam"},{name:"power",label:"Power normal",model:"power",note_toggle:!1,model_note:"powerNote",cat:"neurological_exam"},{name:"sensation",label:"Sensation Normal",model:"sensation",note_toggle:!1,model_note:"sensationNote",cat:"neurological_exam"},{name:"tone",label:"Tone normal",model:"tone",note_toggle:!1,model_note:"toneNote",cat:"neurological_exam"},{name:"reflex",label:"Reflex Normal",model:"reflex",note_toggle:!1,model_note:"reflexNote",cat:"neurological_exam"},{name:"cnii_x_ii",label:"CN II X-II normal",model:"cniixii",note_toggle:!1,model_note:"cniixiiNote",cat:"neurological_exam"}],note:{name:"neurological_exam_note",label:"Neurological Exam Note",model:"neurologicalExamNote",cat:"neurological_exam"}},values:{_id:null,id:"",date:"",time:"",printed:!1,er_card:{hpi:"",pmhx:"None",medication:"None",allergies:"None"},physical_exam:{respiratory_exam:{status:2,good_bilat_a_e:{text:"Normal",index:2},good_bilat_a_e_note:"",decrease_a_e:{text:"Normal",index:2},decrease_a_e_note:"",wheezing:{text:"Normal",index:2},wheezing_note:"",crackle:{text:"Normal",index:2},crackle_note:"",respiratory_exam_note:""},cardio_vascular:{status:2,s1:{text:"Normal",index:2},s1_note:"",s2:{text:"Normal",index:2},s2_note:"",ppp:{text:"Normal",index:2},ppp_note:"",cardio_vascular_note:""},abdominal_exam:{status:2,soft_and_non_tender:{text:"Normal",index:2},soft_and_non_tender_note:"",bsp:{text:"Normal",index:2},bsp_note:"",fpp_and_equal:{text:"Normal",index:2},fpp_and_equal_note:"",distended:{text:"Normal",index:2},distended_note:"",tender:{text:"Normal",index:2},tender_note:"",decrease_bowel_sounds:{text:"Normal",index:2},decrease_bowel_sounds_note:"",abdominal_exam_note:""},heent:{throat_clear:{text:"Normal",index:2},throat_clear_note:"",tm:{text:"Normal",index:2},tm_note:"",neck_supple:{text:"Normal",index:2},neck_supple_note:"",tm_red_and_bulging:{text:"Normal",index:2},tm_red_and_bulging_note:"",exudates_on_tonsil:{text:"Normal",index:2},exudates_on_tonsil_note:"",cervical_adenopathy:{text:"Normal",index:2},cervical_adenopathy_note:"",heent_note:""},neurological_exam:{cnii_x_ii:{text:"Normal",index:2},cnii_x_ii_note:"",power:{text:"Normal",index:2},power_note:"",sensation:{text:"Normal",index:2},sensation_note:"",tone:{text:"Normal",index:2},tone_note:"",cl_exam:{text:"Normal",index:2},cl_exam_note:"",neurological_exam_note:""},notes:""},diagnosis:"",discharge_instruction:""}};return constants}),angular.module("ERChart").factory("erutils",["$timeout","$rootScope",function($timeout,$rootScope){var erutils={showToast:function(position,duration,message){"top"===position?"short"===duration?window.plugins.toast.showShortTop(message):window.plugins.toast.showLongTop(message):"bottom"===position?"short"===duration?window.plugins.toast.showShortBottom(message):window.plugins.toast.showLongBottom(message):"center"===position&&("short"===duration?window.plugins.toast.showShortTop(message):window.plugins.toast.showLongTop(message))},filterCharts:function(charts,chartId){return charts.filter(function(chart){return chart.id!==chartId})},broadcastPageEvent:function(eventName){$timeout(function(){$rootScope.$broadcast("PageEvent:"+eventName)})}};return erutils}]),angular.module("ERChart").directive("erform",["$state","constants","$timeout","cache","$log","$stateParams","$ionicPopup","$q","erutils","$document",function($state,constants,$timeout,cache,$log,$stateParams,$ionicPopup,$q,erutils){return function($scope,$elem){var currentChart={},allCharts=[],navigateToHome=function(){$state.go("root.home"),$timeout(function(){setDefault(),cache.broadcastCacheEvent("Updated")})},showPatientIdPopupAndPrint=function(){return $ionicPopup.show({template:'<input type="text" ng-model="chart.id">',title:"Please enter a patient id.",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Print</b>",type:"button-positive",onTap:function(e){return $scope.chart.id?$scope.chart.id:void e.preventDefault()}}]})},showPatientIdPopup=function(){return $ionicPopup.show({template:'<input type="text" ng-model="chart.id">',title:"Please enter a patient id.",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){return $scope.chart.id?$scope.chart.id:void e.preventDefault()}}]})},formFieldDefaults=constants.values;$scope.chart={},$scope.options=constants.options,$scope.resp=constants.respiratory_exam,$scope.abdo=constants.abdominal_exam,$scope.heent=constants.heent,$scope.cardiov=constants.cardio_vascular,$scope.neuro=constants.neurological_exam,$scope.physical_exam_modules={"Respiratory Exam":constants.respiratory_exam,"Abdominal Exam":constants.abdominal_exam,Heent:constants.heent,"Cardio Vascular":constants.cardio_vascular,"Neurological Exam":constants.neurological_exam};var formValueSetter=function(dataObj,flag){return"status"===flag?0:"textarea"===flag?"":"checkbox"===flag?!1:"date"===flag?moment().format("YYYY-MM-DD"):"time"===flag?moment().format("hh:mm: A"):void 0},getSavedFieldValue=function(savedValues,flag,tagType){return!angular.isObject(savedValues)||_.isEmpty(savedValues)?formValueSetter(null,"status"):tagType?"input"===tagType?_.pick(savedValues,flag)[flag]:"checkbox"===tagType?savedValues[flag]?savedValues[flag]:!1:"textarea"===tagType?savedValues[flag]?savedValues[flag]:"":void 0:savedValues[flag]},setModuleStatus=function(cat,state,param_data){cat&&($scope.ExaminationForm[cat+"_status"].$modelValue=angular.isString(param_data)||!param_data?formValueSetter(null,"status"):getSavedFieldValue(param_data[cat],"status"),$scope.ExaminationForm[cat+"_status"].$$writeModelToScope(),$scope.ExaminationForm[cat+"_status"].$render())},setCheckBoxState=function(fieldName,cat,param_data){$scope.ExaminationForm[fieldName.name].$viewValue=angular.isString(param_data)||!param_data?formValueSetter(formFieldDefaults.physical_exam[cat],"checkbox"):getSavedFieldValue(param_data[cat],fieldName.model,"checkbox"),$scope.ExaminationForm[fieldName.name].$render(),$scope.ExaminationForm[fieldName.name].$commitViewValue()},setNoteState=function(field,param_data){$scope.ExaminationForm[field.name]&&($scope.ExaminationForm[field.name].$viewValue=angular.isString(param_data)||!param_data?formValueSetter(formFieldDefaults.physical_exam[field.module][field.name],"textarea"):getSavedFieldValue(param_data[field.module],field.model,"textarea",field.module),$scope.ExaminationForm[field.name].$render(),$scope.ExaminationForm[field.name].$commitViewValue())},setDefault=function(state_data){var deferred=$q.defer();$scope.ExaminationForm.date.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults,"date"):getSavedFieldValue(state_data,"date","input"),$scope.ExaminationForm.time.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults,"time"):getSavedFieldValue(state_data,"time","input"),$scope.ExaminationForm.date.$render(),$scope.ExaminationForm.date.$commitViewValue(),$scope.ExaminationForm.time.$render(),$scope.ExaminationForm.time.$commitViewValue(),$scope.ExaminationForm.id.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults,"id","input"):getSavedFieldValue(state_data,"id","input"),$scope.ExaminationForm.id.$render(),$scope.ExaminationForm.id.$commitViewValue();for(var i=0,list=["heent","resp","abdo","cardiov","neuro"],listLen=list.length;listLen>i;i++)setModuleStatus($scope[list[i]].cat_name,function(){return angular.isObject(state_data)?getSavedFieldValue(state_data[$scope[list[i]].cat_name],"status","input",$scope[list[i]].cat_name):setModuleStatus(list[i],"status","default")},state_data);for(var i=0,list=[{name:"good_bilat_a_e",model:"goodBilatA_E"},{name:"wheezing",model:"wheezing"},{name:"crackle",model:"crackle"}],listLen=list.length;listLen>i;i++)setCheckBoxState(list[i],"respiratory_exam",state_data);for(var i=0,list=[{name:"throat_clear",model:"throatClear"},{name:"tm",model:"tm"},{name:"neck_supple",model:"neckSupple"}],listLen=list.length;listLen>i;i++)setCheckBoxState(list[i],"heent",state_data);for(var i=0,list=[{name:"soft_and_non_tender",model:"softAndNonTender"},{name:"bsp",model:"bsp"},{name:"mass",model:"mass"},{name:"organomegaly",model:"organomegaly"},{name:"no_sign_of_peritonitis",model:"noSignOfPeritonitis"},{name:"fpp_and_equal",model:"fppAndEqual"}],listLen=list.length;listLen>i;i++)setCheckBoxState(list[i],"abdominal_exam",state_data);for(var i=0,list=[{name:"s1_s2_present",model:"s1S2Present"},{name:"s3",model:"s3"},{name:"s4",model:"s4"},{name:"murmur",model:"murmur"},{name:"ppp",model:"ppp"},{name:"jvd",model:"jvd"}],listLen=list.length;listLen>i;i++)setCheckBoxState(list[i],"cardio_vascular",state_data);for(var i=0,list=[{name:"cerebellum_exam",model:"cerebellumExam"},{name:"power",model:"power"},{name:"sensation",model:"sensation"},{name:"tone",model:"tone"},{name:"reflex",model:"reflex"},{name:"cnii_x_ii",model:"cniixii"}],listLen=list.length;listLen>i;i++)setCheckBoxState(list[i],"neurological_exam",state_data);for(var i=0,list=[{name:"heent_note",model:"heentNote",module:"heent"},{name:"respiratory_exam_note",model:"respiratoryExamNote",module:"respiratory_exam"},{name:"abdominal_exam_note",model:"abdominalExamNote",module:"abdominal_exam"},{name:"cardio_vascular_note",model:"cardioVascularNote",module:"cardio_vascular"},{name:"neurological_exam_note",model:"neurologicalExamNote",module:"neurological_exam"}],listLen=list.length;listLen>i;i++)setNoteState(list[i],state_data);return $scope.ExaminationForm.hpi.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults.er_card,"hpi","textarea"):getSavedFieldValue(state_data,"hpi","textarea"),$scope.ExaminationForm.pmhx.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults.er_card,"pmhx","textarea"):getSavedFieldValue(state_data,"pmhx","textarea"),$scope.ExaminationForm.medication.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults.er_card,"medication","textarea"):getSavedFieldValue(state_data,"medication","textarea"),$scope.ExaminationForm.allergies.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults.er_card,"allergies","textarea"):getSavedFieldValue(state_data,"allergies","textarea"),$scope.ExaminationForm.notes.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults.physical_exam,"notes","textarea"):getSavedFieldValue(state_data,"notes","textarea"),$scope.ExaminationForm.diagnosis.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults,"diagnosis","textarea"):getSavedFieldValue(state_data,"diagnosis","textarea"),$scope.ExaminationForm.discharge_instruction.$viewValue=angular.isString(state_data)||!state_data?formValueSetter(formFieldDefaults,"discharge_instruction","textarea"):getSavedFieldValue(state_data,"discharge_instruction","textarea"),$scope.ExaminationForm.hpi.$render(),$scope.ExaminationForm.pmhx.$render(),$scope.ExaminationForm.medication.$render(),$scope.ExaminationForm.allergies.$render(),$scope.ExaminationForm.notes.$render(),$scope.ExaminationForm.diagnosis.$render(),$scope.ExaminationForm.discharge_instruction.$render(),$scope.ExaminationForm.hpi.$commitViewValue(),$scope.ExaminationForm.pmhx.$commitViewValue(),$scope.ExaminationForm.medication.$commitViewValue(),$scope.ExaminationForm.allergies.$commitViewValue(),$scope.ExaminationForm.notes.$commitViewValue(),$scope.ExaminationForm.diagnosis.$commitViewValue(),$scope.ExaminationForm.discharge_instruction.$commitViewValue(),deferred.resolve($scope.ExaminationForm),deferred.promise},checkChart=function(){var deferred=$q.defer();return $scope.chart.id&&""!==$scope.chart.id?deferred.resolve($scope.chart):deferred.reject("req:id"),deferred.promise},addChart=function(){var deferred=$q.defer();return allCharts.unshift(angular.extend($scope.chart,{_erid:new Date+$scope.chart.id,date:moment().format("YYYY-MM-DD"),time:moment().format("hh:mm: A")})),deferred.resolve(allCharts),deferred.promise},filterCharts=function(){var deferredFilteredCharts=$q.defer();return allCharts=erutils.filterCharts(allCharts,$stateParams.formId),deferredFilteredCharts.resolve(allCharts),deferredFilteredCharts.promise},initNewChart=function(chartStatus){cache.getLocalData().then(function(successData){allCharts=successData?successData:[]}).then(function(){angular.isObject(chartStatus)?addChart().then(function(updatedCharts){cache.writeLocalData(updatedCharts).then(function(){navigateToHome()})}):showPatientIdPopup().then(function(popUpResult){popUpResult?addChart().then(function(newChartsArray){cache.writeLocalData(newChartsArray).then(function(){navigateToHome()})}):$state.go("root.home")})})},initEditChart=function(){cache.getLocalData().then(function(successData){allCharts=successData?successData:[]}).then(function(){angular.forEach(allCharts,function(chart){$stateParams.formId===chart.id&&(setDefault(chart).then(function(formScope){formScope.$setPristine(),formScope.$setUntouched()}),currentChart=chart)})})},initSaveChart=function(){console.log("---initializing SaveChart---"),$state.is("root.form")?(console.log("---state.is root.form: creating new chart---"),checkChart().then(function(chartStatus){console.log("---chartStatus:valid > moving on..---"),initNewChart(chartStatus)},function(reason){console.log("---chartStatus:invalid > moving on..---"),initNewChart(reason)})):(console.log("---state.is root.edit: processing new form---"),filterCharts().then(function(newChartsArray){allCharts=newChartsArray,addChart().then(function(updatedCharts){console.log("---adding new chart..---"),cache.writeLocalData(updatedCharts).then(function(){console.log("---new chart add to local store successfully...---")})["finally"](function(){console.log("---all clear > going back to home.---"),navigateToHome()})})}))},prepPageToPrint=function(){$scope.ExaminationForm.date.$render(),$scope.ExaminationForm.date.$commitViewValue(),$scope.ExaminationForm.time.$render(),$scope.ExaminationForm.time.$commitViewValue(),$scope.ExaminationForm.heent_note.$render(),$scope.ExaminationForm.heent_note.$commitViewValue(),$scope.ExaminationForm.respiratory_exam_note.$render(),$scope.ExaminationForm.respiratory_exam_note.$commitViewValue(),$scope.ExaminationForm.abdominal_exam_note.$render(),$scope.ExaminationForm.abdominal_exam_note.$commitViewValue(),$scope.ExaminationForm.cardio_vascular_note.$render(),$scope.ExaminationForm.cardio_vascular_note.$commitViewValue(),$scope.ExaminationForm.neurological_exam_note.$render(),$scope.ExaminationForm.neurological_exam_note.$commitViewValue(),$scope.ExaminationForm.id.$render(),$scope.ExaminationForm.id.$commitViewValue(),$scope.ExaminationForm.good_bilat_a_e.$render(),$scope.ExaminationForm.good_bilat_a_e.$commitViewValue(),$scope.ExaminationForm.wheezing.$render(),$scope.ExaminationForm.wheezing.$commitViewValue(),$scope.ExaminationForm.crackle.$render(),$scope.ExaminationForm.crackle.$commitViewValue(),$scope.ExaminationForm.s1_s2_present.$render(),$scope.ExaminationForm.s1_s2_present.$commitViewValue(),$scope.ExaminationForm.s3.$render(),$scope.ExaminationForm.s3.$commitViewValue(),$scope.ExaminationForm.s4.$render(),$scope.ExaminationForm.s4.$commitViewValue(),$scope.ExaminationForm.ppp.$render(),$scope.ExaminationForm.ppp.$commitViewValue(),$scope.ExaminationForm.murmur.$render(),$scope.ExaminationForm.murmur.$commitViewValue(),$scope.ExaminationForm.jvd.$render(),$scope.ExaminationForm.jvd.$commitViewValue(),$scope.ExaminationForm.soft_and_non_tender.$render(),$scope.ExaminationForm.soft_and_non_tender.$commitViewValue(),$scope.ExaminationForm.bsp.$render(),$scope.ExaminationForm.bsp.$commitViewValue(),$scope.ExaminationForm.fpp_and_equal.$render(),$scope.ExaminationForm.fpp_and_equal.$commitViewValue(),$scope.ExaminationForm.organomegaly.$render(),$scope.ExaminationForm.organomegaly.$commitViewValue(),$scope.ExaminationForm.no_sign_of_peritonitis.$render(),$scope.ExaminationForm.no_sign_of_peritonitis.$commitViewValue(),$scope.ExaminationForm.throat_clear.$render(),$scope.ExaminationForm.throat_clear.$commitViewValue(),$scope.ExaminationForm.tm.$render(),$scope.ExaminationForm.tm.$commitViewValue(),$scope.ExaminationForm.neck_supple.$render(),$scope.ExaminationForm.neck_supple.$commitViewValue(),$scope.ExaminationForm.cerebellum_exam.$render(),$scope.ExaminationForm.cerebellum_exam.$commitViewValue(),$scope.ExaminationForm.power.$render(),$scope.ExaminationForm.power.$commitViewValue(),$scope.ExaminationForm.sensation.$render(),$scope.ExaminationForm.sensation.$commitViewValue(),$scope.ExaminationForm.tone.$render(),$scope.ExaminationForm.tone.$commitViewValue(),$scope.ExaminationForm.reflex.$render(),$scope.ExaminationForm.reflex.$commitViewValue();var page=document.getElementById("form");return page},printDone=function(){angular.forEach($elem.parent().children(),function(value,key){key>=2&&console.log(value.remove())}),$scope.chart.printed=!0,initSaveChart()},initPrint=function(){for(var printPage=prepPageToPrint(),parentElem=angular.element($elem[0].parentNode),formElem=angular.element($elem.parent());$elem.parent()[0].children.length<=6;)parentElem.append(formElem.html());ionic.Platform.ready(function(){cordova.plugins.printer.print(printPage,"er-pid-"+$scope.chart.id||"print",function(){printDone()})})};$scope.$on("PageEvent:Print",function(){checkChart().then(function(){initPrint()},function(){showPatientIdPopupAndPrint().then(function(popupResult){popupResult&&initPrint()})})}),$scope.$on("PageEvent:SaveChart",function(){console.log("Event@erForm:: PageEvent:SaveChart"),initSaveChart()}),$scope.$on("PageEvent:UpdateChart",function(){!$scope.ExaminationForm.$invalid&&$state.is("root.edit")&&initSaveChart()}),$scope.$on("PageEvent:GoHome",function(){$scope.ExaminationForm.$pristine&&!$scope.ExaminationForm.$dirty?$state.go("root.home"):!$scope.ExaminationForm.$invalid&&$state.is("root.edit")?initSaveChart():$scope.ExaminationForm.$invalid&&$state.is("root.form")&&initSaveChart()}),$scope.$on("PageEvent:isAdd",function(){$timeout(function(){setDefault("default").then(function(formScope){formScope.$setPristine(),formScope.$setUntouched()})})}),$scope.$on("PageEvent:isEdit",function(){initEditChart()})}}]),angular.module("ERChart").directive("erItemIsprinted",function(){return{restrict:"A",link:function(scope,element,attrs){if(attrs.erItemIsprinted){var c=angular.element(element.children()[0]);c[0].style.background="beige"}}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvYXBwLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGxvY2FsRm9yYWdlUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImFic3RyYWN0Iiwidmlld3MiLCJAIiwicm9vdENvbnRlbnQiLCJyZXNvbHZlIiwiaXNFZGl0TW9kZSIsIm90aGVyd2lzZSIsInNldE5vdGlmeSIsImRyaXZlciIsIndpbmRvdyIsImxvY2FsZm9yYWdlIiwiTE9DQUxTVE9SQUdFIiwibmFtZSIsInN0b3JlTmFtZSIsImRlc2NyaXB0aW9uIiwicnVuIiwiJHJvb3RTY29wZSIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsInNhZmVBcHBseSIsImZuIiwicGhhc2UiLCIkJHBoYXNlIiwidGhpcyIsIiRhcHBseSIsIiRzY29wZSIsIiRmaXJlYmFzZUF1dGgiLCIkdGltZW91dCIsImVyZmlyZSIsIkZpcmViYXNlIiwiYXV0aE9iaiIsImxvZ291dCIsImNvbnNvbGUiLCJsb2ciLCIkdW5hdXRoIiwiZ28iLCIkZmlyZWJhc2UiLCJlcmZpcmVzeW5jIiwiJGFzT2JqZWN0IiwiYXV0aERhdGEiLCIkZ2V0QXV0aCIsInNpZ251cCIsImNyZWQiLCJ1c2VyIiwiZXJ1aWQiLCJ1aWQiLCJsb2dpbiIsIiRjcmVhdGVVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsInBhc3MiLCJ0aGVuIiwidXNlckRhdGEiLCJuZXdVc2VyIiwiX2VydWlkIiwiaG9zcGl0YWwiLCJub20iLCIkYWRkIiwicmVmIiwiaWQiLCJrZXkiLCIkaW5kZXhGb3IiLCIkYXV0aFdpdGhQYXNzd29yZCIsImVycm9yIiwiY2FjaGUiLCJlcnV0aWxzIiwiYnJvYWRjYXN0UGFnZUV2ZW50IiwicHJpbnQiLCJzYXZlIiwiaXMiLCJnb0hvbWUiLCIkaW50ZXJ2YWwiLCJzaG93TGlzdERlbGV0ZSIsImFsbEV4Rm9ybXMiLCJpbml0IiwiZ2V0TG9jYWxEYXRhIiwiZ2V0TG9jYWxEYXRhU3VjY2VzcyIsImZvcm1zIiwibGVuZ3RoIiwic3luY1Njb3BlVG9Mb2NhbCIsIndyaXRlTG9jYWxEYXRhIiwiZGVsZXRlSXRlbSIsIml0ZW0iLCJpbmRleCIsInNwbGljZSIsInByZXBGb3JEZWxldGUiLCJyZWZyZXNoIiwiY2xlYXJBbGwiLCJjbGVhckFsbENhY2hlZCIsImNhblN3aXBlTGlzdCIsImVkaXRJdGVtIiwiZm9ybSIsInRyYW5zaXRpb25UbyIsImZvcm1JZCIsIiRvbiIsImZhY3RvcnkiLCIkbG9jYWxGb3JhZ2UiLCJnZXRTdG9yZUxlbmd0aCIsImdldFN0b3JlS2V5cyIsImtleXMiLCJkYXRhIiwic2V0SXRlbSIsImdldEl0ZW0iLCJjbGVhckNhY2hlZEl0ZW0iLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJicm9hZGNhc3RDYWNoZUV2ZW50IiwiZXZlbnRUeXBlIiwiJGJyb2FkY2FzdCIsImNvbnN0YW50cyIsIm9wdGlvbnMiLCJsYWJlbCIsInZhbHVlIiwiaGVlbnQiLCJjYXRfbmFtZSIsImZpZWxkcyIsIm1vZGVsIiwibm90ZV90b2dnbGUiLCJtb2RlbF9ub3RlIiwiY2F0Iiwibm90ZSIsInJlc3BpcmF0b3J5X2V4YW0iLCJub3RlX3RvZ2dsZV9mbGFnIiwiYWJkb21pbmFsX2V4YW0iLCJjYXJkaW9fdmFzY3VsYXIiLCJuZXVyb2xvZ2ljYWxfZXhhbSIsInZhbHVlcyIsIl9pZCIsImRhdGUiLCJ0aW1lIiwicHJpbnRlZCIsImVyX2NhcmQiLCJocGkiLCJwbWh4IiwibWVkaWNhdGlvbiIsImFsbGVyZ2llcyIsInBoeXNpY2FsX2V4YW0iLCJzdGF0dXMiLCJnb29kX2JpbGF0X2FfZSIsInRleHQiLCJnb29kX2JpbGF0X2FfZV9ub3RlIiwiZGVjcmVhc2VfYV9lIiwiZGVjcmVhc2VfYV9lX25vdGUiLCJ3aGVlemluZyIsIndoZWV6aW5nX25vdGUiLCJjcmFja2xlIiwiY3JhY2tsZV9ub3RlIiwicmVzcGlyYXRvcnlfZXhhbV9ub3RlIiwiczEiLCJzMV9ub3RlIiwiczIiLCJzMl9ub3RlIiwicHBwIiwicHBwX25vdGUiLCJjYXJkaW9fdmFzY3VsYXJfbm90ZSIsInNvZnRfYW5kX25vbl90ZW5kZXIiLCJzb2Z0X2FuZF9ub25fdGVuZGVyX25vdGUiLCJic3AiLCJic3Bfbm90ZSIsImZwcF9hbmRfZXF1YWwiLCJmcHBfYW5kX2VxdWFsX25vdGUiLCJkaXN0ZW5kZWQiLCJkaXN0ZW5kZWRfbm90ZSIsInRlbmRlciIsInRlbmRlcl9ub3RlIiwiZGVjcmVhc2VfYm93ZWxfc291bmRzIiwiZGVjcmVhc2VfYm93ZWxfc291bmRzX25vdGUiLCJhYmRvbWluYWxfZXhhbV9ub3RlIiwidGhyb2F0X2NsZWFyIiwidGhyb2F0X2NsZWFyX25vdGUiLCJ0bSIsInRtX25vdGUiLCJuZWNrX3N1cHBsZSIsIm5lY2tfc3VwcGxlX25vdGUiLCJ0bV9yZWRfYW5kX2J1bGdpbmciLCJ0bV9yZWRfYW5kX2J1bGdpbmdfbm90ZSIsImV4dWRhdGVzX29uX3RvbnNpbCIsImV4dWRhdGVzX29uX3RvbnNpbF9ub3RlIiwiY2VydmljYWxfYWRlbm9wYXRoeSIsImNlcnZpY2FsX2FkZW5vcGF0aHlfbm90ZSIsImhlZW50X25vdGUiLCJjbmlpX3hfaWkiLCJjbmlpX3hfaWlfbm90ZSIsInBvd2VyIiwicG93ZXJfbm90ZSIsInNlbnNhdGlvbiIsInNlbnNhdGlvbl9ub3RlIiwidG9uZSIsInRvbmVfbm90ZSIsImNsX2V4YW0iLCJjbF9leGFtX25vdGUiLCJuZXVyb2xvZ2ljYWxfZXhhbV9ub3RlIiwibm90ZXMiLCJkaWFnbm9zaXMiLCJkaXNjaGFyZ2VfaW5zdHJ1Y3Rpb24iLCJzaG93VG9hc3QiLCJwb3NpdGlvbiIsImR1cmF0aW9uIiwibWVzc2FnZSIsInBsdWdpbnMiLCJ0b2FzdCIsInNob3dTaG9ydFRvcCIsInNob3dMb25nVG9wIiwic2hvd1Nob3J0Qm90dG9tIiwic2hvd0xvbmdCb3R0b20iLCJmaWx0ZXJDaGFydHMiLCJjaGFydHMiLCJjaGFydElkIiwiZmlsdGVyIiwiY2hhcnQiLCJldmVudE5hbWUiLCJkaXJlY3RpdmUiLCIkbG9nIiwiJGlvbmljUG9wdXAiLCIkcSIsIiRlbGVtIiwiY3VycmVudENoYXJ0IiwiYWxsQ2hhcnRzIiwibmF2aWdhdGVUb0hvbWUiLCJzZXREZWZhdWx0Iiwic2hvd1BhdGllbnRJZFBvcHVwQW5kUHJpbnQiLCJzaG93IiwidGVtcGxhdGUiLCJ0aXRsZSIsInNjb3BlIiwiYnV0dG9ucyIsInR5cGUiLCJvblRhcCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNob3dQYXRpZW50SWRQb3B1cCIsImZvcm1GaWVsZERlZmF1bHRzIiwicmVzcCIsImFiZG8iLCJjYXJkaW92IiwibmV1cm8iLCJwaHlzaWNhbF9leGFtX21vZHVsZXMiLCJSZXNwaXJhdG9yeSBFeGFtIiwiQWJkb21pbmFsIEV4YW0iLCJIZWVudCIsIkNhcmRpbyBWYXNjdWxhciIsIk5ldXJvbG9naWNhbCBFeGFtIiwiZm9ybVZhbHVlU2V0dGVyIiwiZGF0YU9iaiIsImZsYWciLCJtb21lbnQiLCJmb3JtYXQiLCJnZXRTYXZlZEZpZWxkVmFsdWUiLCJzYXZlZFZhbHVlcyIsInRhZ1R5cGUiLCJpc09iamVjdCIsIl8iLCJpc0VtcHR5IiwicGljayIsInNldE1vZHVsZVN0YXR1cyIsInBhcmFtX2RhdGEiLCJFeGFtaW5hdGlvbkZvcm0iLCIkbW9kZWxWYWx1ZSIsImlzU3RyaW5nIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsIiRyZW5kZXIiLCJzZXRDaGVja0JveFN0YXRlIiwiZmllbGROYW1lIiwiJHZpZXdWYWx1ZSIsIiRjb21taXRWaWV3VmFsdWUiLCJzZXROb3RlU3RhdGUiLCJmaWVsZCIsInN0YXRlX2RhdGEiLCJkZWZlcnJlZCIsImRlZmVyIiwiaSIsImxpc3QiLCJsaXN0TGVuIiwicHJvbWlzZSIsImNoZWNrQ2hhcnQiLCJyZWplY3QiLCJhZGRDaGFydCIsInVuc2hpZnQiLCJleHRlbmQiLCJfZXJpZCIsIkRhdGUiLCJkZWZlcnJlZEZpbHRlcmVkQ2hhcnRzIiwiaW5pdE5ld0NoYXJ0IiwiY2hhcnRTdGF0dXMiLCJzdWNjZXNzRGF0YSIsInVwZGF0ZWRDaGFydHMiLCJwb3BVcFJlc3VsdCIsIm5ld0NoYXJ0c0FycmF5IiwiaW5pdEVkaXRDaGFydCIsImZvckVhY2giLCJmb3JtU2NvcGUiLCIkc2V0UHJpc3RpbmUiLCIkc2V0VW50b3VjaGVkIiwiaW5pdFNhdmVDaGFydCIsInJlYXNvbiIsInByZXBQYWdlVG9QcmludCIsInMxX3MyX3ByZXNlbnQiLCJzMyIsInM0IiwibXVybXVyIiwianZkIiwib3JnYW5vbWVnYWx5Iiwibm9fc2lnbl9vZl9wZXJpdG9uaXRpcyIsImNlcmViZWxsdW1fZXhhbSIsInJlZmxleCIsInBhZ2UiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicHJpbnREb25lIiwicGFyZW50IiwiY2hpbGRyZW4iLCJyZW1vdmUiLCJpbml0UHJpbnQiLCJwcmludFBhZ2UiLCJwYXJlbnRFbGVtIiwiZWxlbWVudCIsInBhcmVudE5vZGUiLCJmb3JtRWxlbSIsImFwcGVuZCIsImh0bWwiLCJpb25pYyIsIlBsYXRmb3JtIiwicmVhZHkiLCJjb3Jkb3ZhIiwicHJpbnRlciIsInBvcHVwUmVzdWx0IiwiJGludmFsaWQiLCIkcHJpc3RpbmUiLCIkZGlydHkiLCJyZXN0cmljdCIsImxpbmsiLCJhdHRycyIsImVySXRlbUlzcHJpbnRlZCIsImMiLCJzdHlsZSIsImJhY2tncm91bmQiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLFdBQUEsWUFBQSxRQUFBLG9CQUFBLFdBQUEsbUJBRUFELFFBQUFDLE9BQUEsV0FBQUMsUUFBaUMsaUJBQUEscUJBQUEsb0JBQUEsdUJBQUEsU0FBQUMsZUFBQUMsbUJBQUFDLGtCQUFBQyxzQkFNN0JILGVBQUFJLE1BQUEsUUFDSUMsSUFBQSxLQUNBQyxZQUFBLGlDQUNBQyxXQUFBLFdBQ0FDLFlBQUEsSUFFSlIsZUFBQUksTUFBQSxTQUNJQyxJQUFBLFNBQ0FJLE9B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NVEsT0FBQXFFLElBQUEsd0JBQUEsWUFFRXJFLE9BQUF1TyxnQkFBQXNFLFVBQUFyVCxPQUFBb0QsR0FBQSxjQUVJZ08sa0JBR041USxPQUFBcUUsSUFBQSxtQkFBQSxXQUdDckUsT0FBQXVPLGdCQUFBdUUsWUFBQTlTLE9BQUF1TyxnQkFBQXdFLE9BRUV2VCxPQUFBa0IsR0FBQSxjQUNEVixPQUFBdU8sZ0JBQUFzRSxVQUFBclQsT0FBQW9ELEdBQUEsYUFFRWdPLGdCQUNGNVEsT0FBQXVPLGdCQUFBc0UsVUFBQXJULE9BQUFvRCxHQUFBLGNBRUVnTyxrQkFHSjVRLE9BQUFxRSxJQUFBLGtCQUFBLFdBRUVuRSxTQUFBLFdBQ0lnTSxXQUFBLFdBQUF4SyxLQUFBLFNBQUErTyxXQUNFQSxVQUFBQyxlQUNBRCxVQUFBRSxzQkFLUjNRLE9BQUFxRSxJQUFBLG1CQUFBLFdBRUVrTSxzQkFPTjNTLFFBQUFDLE9BQUEsV0FBQTZOLFVBQUEsa0JBQW9ELFdBQ25ELE9BQ0NzSCxTQUFBLElBQ0FDLEtBQUEsU0FBQTFHLE1BQUEyRixRQUFBZ0IsT0FDVSxHQUFBQSxNQUFBQyxnQkFBQSxDQUNJLEdBQUFDLEdBQUF4VixRQUFBc1UsUUFBQUEsUUFBQUwsV0FBQSxHQUNBdUIsR0FBQSxHQUFBQyxNQUFBQyxXQUFBIiwiZmlsZSI6InNjcmlwdHMvYXBwLWI0NTc0MTJmLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnLCBbJ2lvbmljJywgJ0xvY2FsRm9yYWdlTW9kdWxlJywgJ2ZpcmViYXNlJywgJ21nY3JlYS5uZ1N0cmFwJ10pO1xuXG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwkbG9jYWxGb3JhZ2VQcm92aWRlcikge1xuICAgIC8vICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgLy8gICBlbmFibGVkOiB0cnVlLFxuICAgIC8vICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgLy8gfSk7XG5cbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncm9vdCcsIHtcbiAgICAgICAgdXJsOiAnL2EnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcGFydGlhbC9tZW51L21lbnUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdNZW51Q3RybCcsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlXG4gICAgfSk7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ0AnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3BhcnRpYWwvbG9naW4vbG9naW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdzaWdudXAnLCB7XG4gICAgICAgIHVybDogJy9zaWdudXAnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ0AnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3BhcnRpYWwvc2lnbnVwL3NpZ251cC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnU2lnbnVwQ3RybCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdmb3Jnb3QnLCB7XG4gICAgICAgIHVybDogJy9mb3Jnb3QnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ0AnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3BhcnRpYWwvZm9yZ290L2ZvcmdvdC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnRm9yZ290Q3RybCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LnNldHRpbmdzJywge1xuICAgICAgICB1cmw6ICcvc2V0dGluZ3MnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ3Jvb3RDb250ZW50Jzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9wYXJ0aWFsL3NldHRpbmdzL3NldHRpbmdzLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncm9vdC5mb3JtJywge1xuICAgICAgICB1cmw6ICcvZm9ybScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAncm9vdENvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgJ2lzRWRpdE1vZGUnOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvcGFydGlhbC9mb3JtL2Zvcm0uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0Zvcm1DdHJsJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QuZWRpdCcsIHtcbiAgICAgICAgdXJsOiAnL2Zvcm0vOmZvcm1JZCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAncm9vdENvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgJ2lzRWRpdE1vZGUnOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9wYXJ0aWFsL2Zvcm0vZm9ybS5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnRm9ybUN0cmwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncm9vdC5ob21lJywge1xuICAgICAgICB1cmw6ICcvaG9tZScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAncm9vdENvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3BhcnRpYWwvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8qIEFkZCBOZXcgU3RhdGVzIEFib3ZlICovXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XG4gICAgLy8gY29uc29sZS5sb2cod2luZG93LmxvY2FsZm9yYWdlKVxuXG4gICAgICAkbG9jYWxGb3JhZ2VQcm92aWRlci5zZXROb3RpZnkodHJ1ZSwgdHJ1ZSk7IC8vIGl0ZW1TZXQsIGl0ZW1SZW1vdmVcbiAgICAgICRsb2NhbEZvcmFnZVByb3ZpZGVyLmNvbmZpZyh7XG4gICAgICAgIGRyaXZlcjogd2luZG93LmxvY2FsZm9yYWdlLkxPQ0FMU1RPUkFHRSxcbiAgICAgICAgbmFtZSAgICAgICAgOiAnRVJhXycsXG4gICAgICAgIHN0b3JlTmFtZSAgIDogJ0VSYUxvY2FsU3RvcmUnLFxuICAgICAgICBkZXNjcmlwdGlvbiA6ICdFUmEgbG9jYWwgZGF0YS4nXG4gICAgICB9KTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCRzdGF0ZSwkc3RhdGVQYXJhbXMpIHtcblxuICAgJHJvb3RTY29wZS4kc3RhdGU9JHN0YXRlO1xuICAgJHJvb3RTY29wZS4kc3RhdGVQYXJhbXM9JHN0YXRlUGFyYW1zO1xuXG5cbiAgICAkcm9vdFNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIHZhciBwaGFzZSA9ICRyb290U2NvcGUuJCRwaGFzZTtcbiAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLmNvbnRyb2xsZXIoJ01lbnVDdHJsJyxmdW5jdGlvbigkc2NvcGUsJGZpcmViYXNlQXV0aCwkdGltZW91dCwkc3RhdGUpe1xuICB2YXIgZXJmaXJlID0gbmV3IEZpcmViYXNlKCdodHRwczovL2VyYS5maXJlYmFzZWlvLmNvbS91c2VycycpO1xuICAkc2NvcGUuYXV0aE9iaiA9ICRmaXJlYmFzZUF1dGgoZXJmaXJlKTtcbiAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICBjb25zb2xlLmxvZygnc2hvdWxkIGxvZyBvdXQnKTtcbiAgICAgICRzY29wZS5hdXRoT2JqLiR1bmF1dGgoKTtcbiAgICAgICR0aW1lb3V0KCBmdW5jdGlvbigpe1xuICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4nKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICRmaXJlYmFzZSwgJGZpcmViYXNlQXV0aCwgJHN0YXRlKSB7XG4gICAgdmFyIGVyZmlyZSA9IG5ldyBGaXJlYmFzZSgnaHR0cHM6Ly9lcmEuZmlyZWJhc2Vpby5jb20vdXNlcnMnKTtcbiAgICB2YXIgZXJmaXJlc3luYyA9ICRmaXJlYmFzZShlcmZpcmUpLiRhc09iamVjdCgpO1xuICAgICRzY29wZS5hdXRoT2JqID0gJGZpcmViYXNlQXV0aChlcmZpcmUpO1xuICAgIHZhciBhdXRoRGF0YSA9ICRzY29wZS5hdXRoT2JqLiRnZXRBdXRoKCk7XG4gICAgdmFyIHVzZXJzID0gW107XG5cbiAgICAkc2NvcGUuc2lnbnVwID0ge307XG4gICAgJHNjb3BlLmNyZWQgPSB7fTtcbiAgICAkc2NvcGUudXNlciA9IHtcbiAgICAgICAgZXJ1aWQgOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChhdXRoRGF0YSkge1xuICAgICAgY29uc29sZS5sb2coXCJBbHJlYWR5IGluIGFzOlwiLCBhdXRoRGF0YS51aWQpO1xuICAgICAgY29uc29sZS5sb2coYXV0aERhdGEpXG4gICAgICAkc2NvcGUudXNlci5lcnVpZCA9IGF1dGhEYXRhLnVpZDtcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZS51c2VyKTtcbiAgICAgICR0aW1lb3V0KCBmdW5jdGlvbigpe1xuICAgICAgICAgICRzdGF0ZS5nbygnZGVmYXVsdC5ob21lJylcbiAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJMb2dnZWQgb3V0XCIpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAkc3RhdGUuZ28oJ3Jvb3QuaG9tZScpO1xuICAgICAgICAvLyAkc2NvcGUuYXV0aE9iai4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgIC8vICAgZW1haWw6ICRzY29wZS5jcmVkLmVtYWlsLFxuICAgICAgICAvLyAgIHBhc3N3b3JkOiAkc2NvcGUuY3JlZC5wYXNzXG4gICAgICAgIC8vIH0pLnRoZW4oZnVuY3Rpb24oYXV0aERhdGEpIHtcbiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhcIkxvZ2dlZCBpbiBhczpcIiwgYXV0aERhdGEudWlkKTtcbiAgICAgICAgLy8gICAkc2NvcGUuY3JlZCA9IHt9XG4gICAgICAgIC8vICAgJHRpbWVvdXQoIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgICAgICRzdGF0ZS5nbygncm9vdC5ob21lJylcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAvLyB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoXCJBdXRoZW50aWNhdGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgLy8gfSk7XG4gICAgfTtcbiAgICAkc2NvcGUuc2lnbnVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmF1dGhPYmouJGNyZWF0ZVVzZXIoe1xuICAgICAgICAgIGVtYWlsOiAkc2NvcGUuc2lnbnVwLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUuc2lnbnVwLnBhc3MsXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odXNlckRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgXCIgKyB1c2VyRGF0YS51aWQgKyBcIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFcIik7XG4gICAgICAgICAgdmFyIG5ld1VpZCA9IHVzZXJEYXRhLnVpZDtcbiAgICAgICAgICB2YXIgbmV3VXNlciA9IHtcbiAgICAgICAgICAgICAgICAgIF9lcnVpZDogdXNlckRhdGEudWlkLFxuICAgICAgICAgICAgICAgICAgaG9zcGl0YWw6ICRzY29wZS5zaWdudXAuaG9zcGl0YWwsXG4gICAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUuc2lnbnVwLm5vbVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBlcmZpcmVzeW5jLiRhZGQobmV3VXNlcikudGhlbihmdW5jdGlvbihyZWYpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHJlZi5rZXkoKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWRkZWQgcmVjb3JkIHdpdGggaWQgXCIgKyBpZCk7XG4gICAgICAgICAgICAgICAgICBlcmZpcmVzeW5jLiRpbmRleEZvcihpZCk7IC8vIHJldHVybnMgbG9jYXRpb24gaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcmZpcmVzeW5jKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiAkc2NvcGUuYXV0aE9iai4kYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgICAgICBlbWFpbDogJHNjb3BlLnNpZ251cC5lbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAkc2NvcGUuc2lnbnVwLnBhc3NcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihhdXRoRGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9nZ2VkIGluIGFzOlwiLCBhdXRoRGF0YS51aWQpO1xuICAgICAgICAgICRzY29wZS51c2VyLmVydWlkID0gYXV0aERhdGEudWlkO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS51c2VyKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhhdXRoRGF0YSk7XG5cbiAgICAgICAgICAkdGltZW91dCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2RlZmF1bHQuaG9tZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAkc2NvcGUuc2lnbnVwID0ge307XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBcIiwgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coJ3Nob3VsZCBsb2cgb3V0Jyk7XG4gICAgICAkc2NvcGUuYXV0aE9iai4kdW5hdXRoKCk7XG4gICAgICAkdGltZW91dCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3Jvb3QubG9naW4nKVxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdFUkNoYXJ0JykuY29udHJvbGxlcignU2lnbnVwQ3RybCcsZnVuY3Rpb24oJHNjb3BlKXtcblxuXG59KTtcbmFuZ3VsYXIubW9kdWxlKCdFUkNoYXJ0JykuY29udHJvbGxlcignRm9yZ290Q3RybCcsZnVuY3Rpb24oJHNjb3BlKXtcblxuXG59KTtcbmFuZ3VsYXIubW9kdWxlKCdFUkNoYXJ0JykuY29udHJvbGxlcignU2V0dGluZ3NDdHJsJyxmdW5jdGlvbigkc2NvcGUpe1xuXG5cbn0pO1xuYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnKS5jb250cm9sbGVyKCdGb3JtQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCBjYWNoZSwgZXJ1dGlscywgJHN0YXRlLCBpc0VkaXRNb2RlLCAkc3RhdGVQYXJhbXMpe1xuICAgIGNvbnNvbGUubG9nKCRzdGF0ZSlcbiAgICBpZiAoaXNFZGl0TW9kZSl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzaG91bGQgYnJvYWRjYXN0OiBpc0VkaXQnKVxuICAgICAgZXJ1dGlscy5icm9hZGNhc3RQYWdlRXZlbnQoJ2lzRWRpdCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzaG91bGQgYnJvYWRjYXN0OiBpc0FkZCcpXG4gICAgICBlcnV0aWxzLmJyb2FkY2FzdFBhZ2VFdmVudCgnaXNBZGQnKTtcbiAgICB9XG4gICAgJHNjb3BlLnByaW50ID0gZnVuY3Rpb24oKXtcbiAgICAgIGVydXRpbHMuYnJvYWRjYXN0UGFnZUV2ZW50KCdQcmludCcpO1xuICAgIH07XG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuICAgICAgaWYgKCRzdGF0ZS5pcygncm9vdC5lZGl0Jykpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2F2aW5nOiBvbiBlZGl0JylcbiAgICAgICAgZXJ1dGlscy5icm9hZGNhc3RQYWdlRXZlbnQoJ1VwZGF0ZUNoYXJ0Jyk7XG4gICAgICB9IGVsc2UgaWYgKCRzdGF0ZS5pcygncm9vdC5mb3JtJykpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2F2aW5nOiBvbiBjcmVhdGUnKVxuICAgICAgICBlcnV0aWxzLmJyb2FkY2FzdFBhZ2VFdmVudCgnU2F2ZUNoYXJ0Jyk7XG4gICAgICB9XG4gICAgfTtcbiAgICAkc2NvcGUuZ29Ib21lID0gZnVuY3Rpb24oKXtcbiAgICAgIGVydXRpbHMuYnJvYWRjYXN0UGFnZUV2ZW50KCdHb0hvbWUnKTtcbiAgICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdFUkNoYXJ0JykuY29udHJvbGxlcignRWRpdEN0cmwnLGZ1bmN0aW9uKCRzY29wZSl7XG5cblxufSk7XG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxmdW5jdGlvbigkc2NvcGUsIGNhY2hlLCAkaW50ZXJ2YWwsICRzdGF0ZSwgJHRpbWVvdXQpe1xuICAkc2NvcGUuc2hvd0xpc3REZWxldGUgPSBmYWxzZTtcbiAgdmFyIGFsbEV4Rm9ybXMgPSBbXTtcbiAgdmFyIGluaXQgPSBmdW5jdGlvbigpe1xuICAgIGNhY2hlLmdldExvY2FsRGF0YSgpLnRoZW4oZnVuY3Rpb24oZ2V0TG9jYWxEYXRhU3VjY2Vzcyl7XG4gICAgICBpZiAoZ2V0TG9jYWxEYXRhU3VjY2Vzcy5sZW5ndGgpe1xuICAgICAgICAkc2NvcGUuZm9ybXMgPSBnZXRMb2NhbERhdGFTdWNjZXNzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNjb3BlLmZvcm1zID0gYWxsRXhGb3JtcztcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgdmFyIHN5bmNTY29wZVRvTG9jYWwgPSBmdW5jdGlvbigpe1xuICAgIGNhY2hlLndyaXRlTG9jYWxEYXRhKGFsbEV4Rm9ybXMpLnRoZW4oXG4gICAgICBmdW5jdGlvbihzZXRTdWNjZXNzKXtcbiAgICAgICAgaW5pdCgpO1xuICAgICAgfVxuICAgICk7XG4gIH07XG4gIHZhciBkZWxldGVJdGVtID0gZnVuY3Rpb24oaXRlbSwgaW5kZXgpe1xuICAgIGlmIChhbGxFeEZvcm1zLmxlbmd0aCl7XG4gICAgICBhbGxFeEZvcm1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBzeW5jU2NvcGVUb0xvY2FsKCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBwcmVwRm9yRGVsZXRlID0gZnVuY3Rpb24oaXRlbSwgaW5kZXgpe1xuICAgIGNhY2hlLmdldExvY2FsRGF0YSgpLnRoZW4oZnVuY3Rpb24oZ2V0TG9jYWxEYXRhU3VjY2Vzcyl7XG4gICAgICBpZiAoIWdldExvY2FsRGF0YVN1Y2Nlc3MubGVuZ3RoKXtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxsRXhGb3JtcyA9IGdldExvY2FsRGF0YVN1Y2Nlc3M7XG4gICAgICAgICAgZGVsZXRlSXRlbShpdGVtLCBpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldExvY2FsRGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgY2FjaGUuZ2V0TG9jYWxEYXRhKCkudGhlbihmdW5jdGlvbihnZXRMb2NhbERhdGFTdWNjZXNzKXtcbiAgICAgIGlmICghZ2V0TG9jYWxEYXRhU3VjY2Vzcyl7XG4vLyAgICAgICAgICAkaW50ZXJ2YWwoZ2V0TG9jYWxEYXRhLCAxMDAwLCAzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coZ2V0TG9jYWxEYXRhU3VjY2VzcylcbiAgICAgICAgICBhbGxFeEZvcm1zID0gZ2V0TG9jYWxEYXRhU3VjY2VzcztcbiAgICAgICAgICAkc2NvcGUuZm9ybXMgPSBnZXRMb2NhbERhdGFTdWNjZXNzO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5yZWZyZXNoID0gZnVuY3Rpb24oKXtcbiAgICAgIGdldExvY2FsRGF0YSgpO1xuICB9O1xuICAkc2NvcGUuY2xlYXJBbGwgPSBmdW5jdGlvbihkYXRhKXtcbiAgICBjYWNoZS5jbGVhckFsbENhY2hlZCgpO1xuICAgICRzY29wZS5mb3JtcyA9IFtdO1xuICB9O1xuICAkc2NvcGUuY2FuU3dpcGVMaXN0ID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgJHNjb3BlLmRlbGV0ZUl0ZW0gPSBmdW5jdGlvbihpdGVtLCBpbmRleCl7XG4gICAgaWYgKCFpbmRleCAmJiBhbGxFeEZvcm1zLmxlbmd0aCA9PT0gMSl7XG4gICAgICBhbGxFeEZvcm1zID0gW107XG4gICAgICBzeW5jU2NvcGVUb0xvY2FsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXBGb3JEZWxldGUoaXRlbSwgaW5kZXgpO1xuICAgIH1cbiAgfTtcbiAgJHNjb3BlLmVkaXRJdGVtID0gZnVuY3Rpb24oZm9ybSl7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oJ3Jvb3QuZWRpdCcsIHtmb3JtSWQ6IGZvcm0uaWR9KTtcbiAgICB9KTtcbiAgfTtcblxuICBpbml0KCk7XG5cbiAgJHNjb3BlLiRvbignQ2FjaGVVcGRhdGU6VXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBhcmdzKXtcbiAgICBpbml0KCk7XG4gIH0pO1xuXG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnKS5mYWN0b3J5KCdjYWNoZScsZnVuY3Rpb24oJGxvY2FsRm9yYWdlLCAkcm9vdFNjb3BlKSB7XG5cblx0dmFyIGNhY2hlID0ge1xuICAgICAgICBnZXRTdG9yZUxlbmd0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRsb2NhbEZvcmFnZS5sZW5ndGgoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3RvcmVLZXlzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGxvY2FsRm9yYWdlLmtleXMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgd3JpdGVMb2NhbERhdGE6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGxvY2FsRm9yYWdlLnNldEl0ZW0oJ0V4Rm9ybXMnLCBkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0TG9jYWxEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJGxvY2FsRm9yYWdlLmdldEl0ZW0oJ0V4Rm9ybXMnKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJDYWNoZWRJdGVtOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuICRsb2NhbEZvcmFnZS5yZW1vdmVJdGVtKGl0ZW0pO1xuICAgICAgICB9LFxuICAgICAgICBjbGVhckFsbENhY2hlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRsb2NhbEZvcmFnZS5jbGVhcigpO1xuICAgICAgICB9LFxuICAgICAgICBicm9hZGNhc3RDYWNoZUV2ZW50OiBmdW5jdGlvbiAoZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnJvYWRjYXN0aW5nOiAnICsgZXZlbnRUeXBlKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQ2FjaGVVcGRhdGU6JyArIGV2ZW50VHlwZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdHJldHVybiBjYWNoZTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLmZhY3RvcnkoJ2NvbnN0YW50cycsZnVuY3Rpb24oKSB7XG5cblx0dmFyIGNvbnN0YW50cyA9IHtcbiAgICAgICAgb3B0aW9ucyA6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ25vdCBhcHBsaWNhYmxlJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0Fibm9ybWFsJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgdmFsdWU6IDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgaGVlbnQgOiB7XG4gICAgICAgICAgICBjYXRfbmFtZTogJ2hlZW50JyxcbiAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBcInRocm9hdF9jbGVhclwiLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiVGhyb2F0IGNsZWFyXCIsXG4gICAgICAgICAgICAgICAgICBtb2RlbDogXCJ0aHJvYXRDbGVhclwiLFxuICAgICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJ0aHJvYXRDbGVhck5vdGVcIixcbiAgICAgICAgICAgICAgICAgIGNhdDogXCJoZWVudFwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwidG1cIixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIlRNIG5vcm1hbFwiLFxuICAgICAgICAgICAgICAgICAgbW9kZWw6IFwidG1cIixcbiAgICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwidG1Ob3RlXCIsXG4gICAgICAgICAgICAgICAgICBjYXQ6IFwiaGVlbnRcIlxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBcIm5lY2tfc3VwcGxlXCIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogXCJOZWNrIHN1cHBsZVwiLFxuICAgICAgICAgICAgICAgICAgbW9kZWw6IFwibmVja1N1cHBsZVwiLFxuICAgICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJuZWNrU3VwcGxlTm90ZVwiLFxuICAgICAgICAgICAgICAgICAgY2F0OiBcImhlZW50XCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAvLyAgICAgbmFtZTogXCJ0bV9yZWRfYW5kX2J1bGdpbmdcIixcbiAgICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBcIlRNIHJlZCBhbmQgYnVsZ2luZ1wiLFxuICAgICAgICAgICAgICAvLyAgICAgbW9kZWw6IFwidG1SZWRBbmRCdWxnaW5nXCIsXG4gICAgICAgICAgICAgIC8vICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIC8vICAgICBtb2RlbF9ub3RlOiBcInRtUmVkQW5kQnVsZ2luZ05vdGVcIixcbiAgICAgICAgICAgICAgLy8gICAgIGNhdDogXCJoZWVudFwiXG4gICAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IFwiZXh1ZGF0ZXNfb25fdG9uc2lsXCIsXG4gICAgICAgICAgICAgIC8vICAgICBsYWJlbDogXCJFeHVkYXRlcyBvbiB0b25zaWxcIixcbiAgICAgICAgICAgICAgLy8gICAgIG1vZGVsOiBcImV4dWRhdGVzT25Ub25zaWxcIixcbiAgICAgICAgICAgICAgLy8gICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgLy8gICAgIG1vZGVsX25vdGU6IFwiZXh1ZGF0ZXNPblRvbnNpbE5vdGVcIixcbiAgICAgICAgICAgICAgLy8gICAgIGNhdDogXCJoZWVudFwiXG4gICAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IFwiY2VydmljYWxfYWRlbm9wYXRoeVwiLFxuICAgICAgICAgICAgICAvLyAgICAgbGFiZWw6IFwiQ2VydmljYWwgYWRlbm9wYXRoeVwiLFxuICAgICAgICAgICAgICAvLyAgICAgbW9kZWw6IFwiY2VydmljYWxBZGVub3BhdGh5XCIsXG4gICAgICAgICAgICAgIC8vICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIC8vICAgICBtb2RlbF9ub3RlOiBcImNlcnZpY2FsQWRlbm9wYXRoeU5vdGVcIixcbiAgICAgICAgICAgICAgLy8gICAgIGNhdDogXCJoZWVudFwiXG4gICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG5vdGU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImhlZW50X25vdGVcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJIZWVudCBOb3RlXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiaGVlbnROb3RlXCIsXG4gICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNhdDogXCJoZWVudFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgIHJlc3BpcmF0b3J5X2V4YW0gOiB7XG4gICAgICAgICAgICBjYXRfbmFtZTogJ3Jlc3BpcmF0b3J5X2V4YW0nLFxuICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJnb29kX2JpbGF0X2FfZVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkdvb2QgYmlsYXQgQS9FXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiZ29vZEJpbGF0QV9FXCIsXG4gICAgICAgICAgICAgICAgbm90ZV90b2dnbGVfZmxhZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJnb29kQmlsYXRBRU5vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwicmVzcGlyYXRvcnlfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgLy8gICAgIG5hbWU6IFwiZGVjcmVhc2VfYV9lXCIsXG4gICAgICAgICAgICAvLyAgICAgbGFiZWw6IFwiRGVjcmVhc2UgQS9FXCIsXG4gICAgICAgICAgICAvLyAgICAgbW9kZWw6IFwiZGVjcmVhc2VBX0VcIixcbiAgICAgICAgICAgIC8vICAgICBub3RlX3RvZ2dsZV9mbGFnOiBmYWxzZSxcbiAgICAgICAgICAgIC8vICAgICBtb2RlbF9ub3RlOiBcImRlY3JlYXNlQUVOb3RlXCIsXG4gICAgICAgICAgICAvLyAgICAgY2F0OiBcInJlc3BpcmF0b3J5X2V4YW1cIlxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIndoZWV6aW5nXCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiTm8gV2hlZXppbmdcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJ3aGVlemluZ1wiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlX2ZsYWc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwid2hlZXppbmdOb3RlXCIsXG4gICAgICAgICAgICAgICAgY2F0OiBcInJlc3BpcmF0b3J5X2V4YW1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNyYWNrbGVcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJObyBDcmFja2xlXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiY3JhY2tsZVwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlX2ZsYWc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwiY3JhY2tsZU5vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwicmVzcGlyYXRvcnlfZXhhbVwiXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIG5vdGU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJlc3BpcmF0b3J5X2V4YW1fbm90ZVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIlJlc3BpcmF0b3J5IEV4YW1cIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJyZXNwaXJhdG9yeUV4YW1Ob3RlXCIsXG4gICAgICAgICAgICAgICAgbm90ZV90b2dnbGVfZmxhZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2F0OiBcInJlc3BpcmF0b3J5X2V4YW1cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFiZG9taW5hbF9leGFtIDoge1xuICAgICAgICAgICAgY2F0X25hbWU6ICdhYmRvbWluYWxfZXhhbScsXG4gICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNvZnRfYW5kX25vbl90ZW5kZXJcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJTb2Z0IGFuZCBub24gdGVuZGVyXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwic29mdEFuZE5vblRlbmRlclwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcInNvZnRBbmROb25UZW5kZXJOb3RlXCIsXG4gICAgICAgICAgICAgICAgY2F0OiBcImFiZG9taW5hbF9leGFtXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJic3BcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJCU1BcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJic3BcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJic3BOb3RlXCIsXG4gICAgICAgICAgICAgICAgY2F0OiBcImFiZG9taW5hbF9leGFtXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJtYXNzXCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiTm8gbWFzc1wiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIm1hc3NcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJtYXNzTm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJhYmRvbWluYWxfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwib3JnYW5vbWVnYWx5XCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiTm8gb3JnYW5vbWVnYWx5XCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwib3JnYW5vbWVnYWx5XCIsXG4gICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwib3JnYW5vbWVnYWx5Tm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJhYmRvbWluYWxfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwibm9fc2lnbl9vZl9wZXJpdG9uaXRpc1wiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIk5vIHNpZ24gb2YgcGVyaXRvbml0aXNcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJub1NpZ25PZlBlcml0b25pdGlzXCIsXG4gICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwibm9TaWduT2ZQZXJpdG9uaXRpc05vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwiYWJkb21pbmFsX2V4YW1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImZwcF9hbmRfZXF1YWxcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJGUFAgYW5kIGVxdWFsXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiZnBwQW5kRXF1YWxcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJmcHBBbmRFcXVhbE5vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwiYWJkb21pbmFsX2V4YW1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBcImRpc3RlbmRlZFwiLFxuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBcIkRpc3RlbmRlZFwiLFxuICAgICAgICAgICAgLy8gICAgIG1vZGVsOiBcImRpc3RlbmRlZFwiLFxuICAgICAgICAgICAgLy8gICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vICAgICBtb2RlbF9ub3RlOiBcImRpc3RlbmRlZE5vdGVcIixcbiAgICAgICAgICAgIC8vICAgICBjYXQ6IFwiYWJkb21pbmFsX2V4YW1cIlxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBcInRlbmRlclwiLFxuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBcIlRlbmRlclwiLFxuICAgICAgICAgICAgLy8gICAgIG1vZGVsOiBcInRlbmRlclwiLFxuICAgICAgICAgICAgLy8gICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vICAgICBtb2RlbF9ub3RlOiBcInRlbmRlck5vdGVcIixcbiAgICAgICAgICAgIC8vICAgICBjYXQ6IFwiYWJkb21pbmFsX2V4YW1cIlxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBuYW1lOiBcImRlY3JlYXNlX2Jvd2VsX3NvdW5kc1wiLFxuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBcIkRlY3JlYXNlIGJvd2VsIHNvdW5kc1wiLFxuICAgICAgICAgICAgLy8gICAgIG1vZGVsOiBcImRlY3JlYXNlQm93ZWxTb3VuZHNcIixcbiAgICAgICAgICAgIC8vICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAvLyAgICAgbW9kZWxfbm90ZTogXCJkZWNyZWFzZUJvd2VsU291bmRzTm90ZVwiLFxuICAgICAgICAgICAgLy8gICAgIGNhdDogXCJhYmRvbWluYWxfZXhhbVwiXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbm90ZToge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiYWJkb21pbmFsX2V4YW1fbm90ZVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkFiZG9taW5hbCBFeGFtIE5vdGVzXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiYWJkb21pbmFsRXhhbU5vdGVcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2F0OiBcImFiZG9taW5hbF9leGFtXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FyZGlvX3Zhc2N1bGFyIDoge1xuICAgICAgICAgICAgY2F0X25hbWU6ICdjYXJkaW9fdmFzY3VsYXInLFxuICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwiczFfczJfcHJlc2VudFwiLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiUzEgYW5kIFMyIHByZXNlbnRcIixcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiBcInMxUzJQcmVzZW50XCIsXG4gICAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcInMxUzJQcmVzZW50Tm90ZVwiLFxuICAgICAgICAgICAgICAgICAgY2F0OiBcImNhcmRpb192YXNjdWxhclwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwiczNcIixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIk5vIFMzXCIsXG4gICAgICAgICAgICAgICAgICBtb2RlbDogXCJzM1wiLFxuICAgICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJzM05vdGVcIixcbiAgICAgICAgICAgICAgICAgIGNhdDogXCJjYXJkaW9fdmFzY3VsYXJcIlxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBcInM0XCIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogXCJObyBTNFwiLFxuICAgICAgICAgICAgICAgICAgbW9kZWw6IFwiczRcIixcbiAgICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwiczROb3RlXCIsXG4gICAgICAgICAgICAgICAgICBjYXQ6IFwiY2FyZGlvX3Zhc2N1bGFyXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZTogXCJtdXJtdXJcIixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIk5vIG11cm11clwiLFxuICAgICAgICAgICAgICAgICAgbW9kZWw6IFwibXVybXVyXCIsXG4gICAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcIm11cm11ck5vdGVcIixcbiAgICAgICAgICAgICAgICAgIGNhdDogXCJjYXJkaW9fdmFzY3VsYXJcIlxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBcInBwcFwiLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiUFBQXCIsXG4gICAgICAgICAgICAgICAgICBtb2RlbDogXCJwcHBcIixcbiAgICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIG1vZGVsX25vdGU6IFwicHBwTm90ZVwiLFxuICAgICAgICAgICAgICAgICAgY2F0OiBcImNhcmRpb192YXNjdWxhclwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwianZkXCIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogXCJObyBKVkRcIixcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiBcImp2ZFwiLFxuICAgICAgICAgICAgICAgICAgbm90ZV90b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJqdmROb3RlXCIsXG4gICAgICAgICAgICAgICAgICBjYXQ6IFwiY2FyZGlvX3Zhc2N1bGFyXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG5vdGU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNhcmRpb192YXNjdWxhcl9ub3RlXCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQ2FyZGlvIFZhc2N1bGFyIE5vdGVcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJjYXJkaW9WYXNjdWxhck5vdGVcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2F0OiBcImNhcmRpb192YXNjdWxhclwiXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcbiAgICAgICAgbmV1cm9sb2dpY2FsX2V4YW0gOiB7XG4gICAgICAgICAgICBjYXRfbmFtZTogJ25ldXJvbG9naWNhbF9leGFtJyxcbiAgICAgICAgICAgIGZpZWxkczogW3tcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNlcmViZWxsdW1fZXhhbVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkNlcmViZWxsdW0gRXhhbSBOb3JtYWxcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJjZXJlYmVsbHVtRXhhbVwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcImNlcmViZWxsdW1FeGFtTm9ybWFsTm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJuZXVyb2xvZ2ljYWxfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicG93ZXJcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJQb3dlciBub3JtYWxcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJwb3dlclwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcInBvd2VyTm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJuZXVyb2xvZ2ljYWxfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwic2Vuc2F0aW9uXCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiU2Vuc2F0aW9uIE5vcm1hbFwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcInNlbnNhdGlvblwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcInNlbnNhdGlvbk5vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwibmV1cm9sb2dpY2FsX2V4YW1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInRvbmVcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJUb25lIG5vcm1hbFwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcInRvbmVcIixcbiAgICAgICAgICAgICAgICBub3RlX3RvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbW9kZWxfbm90ZTogXCJ0b25lTm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJuZXVyb2xvZ2ljYWxfZXhhbVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicmVmbGV4XCIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiUmVmbGV4IE5vcm1hbFwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcInJlZmxleFwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcInJlZmxleE5vdGVcIixcbiAgICAgICAgICAgICAgICBjYXQ6IFwibmV1cm9sb2dpY2FsX2V4YW1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNuaWlfeF9paVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkNOIElJIFgtSUkgbm9ybWFsXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiY25paXhpaVwiLFxuICAgICAgICAgICAgICAgIG5vdGVfdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtb2RlbF9ub3RlOiBcImNuaWl4aWlOb3RlXCIsXG4gICAgICAgICAgICAgICAgY2F0OiBcIm5ldXJvbG9naWNhbF9leGFtXCJcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgbm90ZToge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwibmV1cm9sb2dpY2FsX2V4YW1fbm90ZVwiLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIk5ldXJvbG9naWNhbCBFeGFtIE5vdGVcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJuZXVyb2xvZ2ljYWxFeGFtTm90ZVwiLFxuICAgICAgICAgICAgICAgIGNhdDogXCJuZXVyb2xvZ2ljYWxfZXhhbVwiXG4gICAgICAgICAgICB9IFxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZXMgOiB7XG4gICAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgICBkYXRlOiAnJyxcbiAgICAgICAgICAgIHRpbWU6ICcnLFxuICAgICAgICAgICAgcHJpbnRlZDogZmFsc2UsXG4gICAgICAgICAgICBlcl9jYXJkOiB7XG4gICAgICAgICAgICAgICAgaHBpOiAnJyxcbiAgICAgICAgICAgICAgICBwbWh4OiAnTm9uZScsXG4gICAgICAgICAgICAgICAgbWVkaWNhdGlvbjogJ05vbmUnLFxuICAgICAgICAgICAgICAgIGFsbGVyZ2llczogJ05vbmUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGh5c2ljYWxfZXhhbToge1xuICAgICAgICAgICAgICAgIHJlc3BpcmF0b3J5X2V4YW06IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyLFxuICAgICAgICAgICAgICAgICAgICBnb29kX2JpbGF0X2FfZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnb29kX2JpbGF0X2FfZV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZGVjcmVhc2VfYV9lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRlY3JlYXNlX2FfZV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgd2hlZXppbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2hlZXppbmdfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGNyYWNrbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY3JhY2tsZV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcGlyYXRvcnlfZXhhbV9ub3RlOiAnJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FyZGlvX3Zhc2N1bGFyOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMixcbiAgICAgICAgICAgICAgICAgICAgczE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgczFfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHMyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHMyX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBwcHA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcHBwX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBjYXJkaW9fdmFzY3VsYXJfbm90ZTogJydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFiZG9taW5hbF9leGFtOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMixcbiAgICAgICAgICAgICAgICAgICAgc29mdF9hbmRfbm9uX3RlbmRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzb2Z0X2FuZF9ub25fdGVuZGVyX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBic3A6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYnNwX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBmcHBfYW5kX2VxdWFsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZwcF9hbmRfZXF1YWxfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGRpc3RlbmRlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkaXN0ZW5kZWRfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRlbmRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0ZW5kZXJfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGRlY3JlYXNlX2Jvd2VsX3NvdW5kczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZWNyZWFzZV9ib3dlbF9zb3VuZHNfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGFiZG9taW5hbF9leGFtX25vdGU6ICcnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWVudDoge1xuICAgICAgICAgICAgICAgICAgICB0aHJvYXRfY2xlYXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhyb2F0X2NsZWFyX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0bToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0bV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgbmVja19zdXBwbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbmVja19zdXBwbGVfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHRtX3JlZF9hbmRfYnVsZ2luZzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0bV9yZWRfYW5kX2J1bGdpbmdfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGV4dWRhdGVzX29uX3RvbnNpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBleHVkYXRlc19vbl90b25zaWxfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGNlcnZpY2FsX2FkZW5vcGF0aHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2VydmljYWxfYWRlbm9wYXRoeV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgaGVlbnRfbm90ZTogJydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5ldXJvbG9naWNhbF9leGFtOiB7XG4gICAgICAgICAgICAgICAgICAgIGNuaWlfeF9paToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vcm1hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjbmlpX3hfaWlfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzZW5zYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2Vuc2F0aW9uX25vdGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0b25lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAyXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvbmVfbm90ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGNsX2V4YW06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2xfZXhhbV9ub3RlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgbmV1cm9sb2dpY2FsX2V4YW1fbm90ZTogJydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5vdGVzOiAnJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpYWdub3NpczogJycsXG4gICAgICAgICAgICBkaXNjaGFyZ2VfaW5zdHJ1Y3Rpb246ICcnXG4gICAgICAgIH1cbiAgICAgICAgLy9lbmRcbiAgICB9O1xuXG5cdHJldHVybiBjb25zdGFudHM7XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnKS5mYWN0b3J5KCdlcnV0aWxzJyxmdW5jdGlvbigkdGltZW91dCwgJHJvb3RTY29wZSkge1xuXG5cdHZhciBlcnV0aWxzID0ge1xuICAgICAgICBzaG93VG9hc3Q6IGZ1bmN0aW9uIChwb3NpdGlvbiwgZHVyYXRpb24sIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09ICdzaG9ydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBsdWdpbnMudG9hc3Quc2hvd1Nob3J0VG9wKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wbHVnaW5zLnRvYXN0LnNob3dMb25nVG9wKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uID09PSAnc2hvcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wbHVnaW5zLnRvYXN0LnNob3dTaG9ydEJvdHRvbShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGx1Z2lucy50b2FzdC5zaG93TG9uZ0JvdHRvbShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gJ3Nob3J0Jykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGx1Z2lucy50b2FzdC5zaG93U2hvcnRUb3AobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBsdWdpbnMudG9hc3Quc2hvd0xvbmdUb3AobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyQ2hhcnRzOiBmdW5jdGlvbihjaGFydHMsIGNoYXJ0SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGFydHMuZmlsdGVyKGZ1bmN0aW9uKGNoYXJ0KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQuaWQgIT09IGNoYXJ0SWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYnJvYWRjYXN0UGFnZUV2ZW50OiBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYnJvYWRjYXN0aW5nOiAnICsgZXZlbnROYW1lKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1BhZ2VFdmVudDonICsgZXZlbnROYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuXHRyZXR1cm4gZXJ1dGlscztcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnRVJDaGFydCcpLmRpcmVjdGl2ZSgnZXJmb3JtJywgZnVuY3Rpb24oJHN0YXRlLCBjb25zdGFudHMsICR0aW1lb3V0LCBjYWNoZSwgJGxvZywgJHN0YXRlUGFyYW1zLCAkaW9uaWNQb3B1cCwgJHEsIGVydXRpbHMsICRkb2N1bWVudCkge1xuICAgIHJldHVybiAgZnVuY3Rpb24oJHNjb3BlLCAkZWxlbSwgJGF0dHIsICR0cmFuc2NsdWRlKXtcbiAgICB2YXIgY3VycmVudENoYXJ0ID0ge307IFxuICAgIHZhciBhbGxDaGFydHMgPSBbXTsgXG5cbiAgICB2YXIgbmF2aWdhdGVUb0hvbWUgPSBmdW5jdGlvbigpe1xuICAgICAgJHN0YXRlLmdvKCdyb290LmhvbWUnKTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHNldERlZmF1bHQoKTtcbiAgICAgICAgY2FjaGUuYnJvYWRjYXN0Q2FjaGVFdmVudCgnVXBkYXRlZCcpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBzaG93RGlzY2FyZENoYXJ0Q29uZmlybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciBjb25maXJtUG9wdXAgPSAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgICAgIHRpdGxlOiAnRGlzY2FyZCBOZXcgQ2hhcnQ/JyxcbiAgICAgICAgIHRlbXBsYXRlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIG5hdmlnYXRlIGF3YXkgZnJvbSB0aGlzIHBhZ2U/J1xuICAgICAgIH0pO1xuICAgICAgIGNvbmZpcm1Qb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgaWYocmVzKSB7XG4gICAgICAgICAgICAgbmF2aWdhdGVUb0hvbWUoKTtcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1lvdSBhcmUgc3VyZScpO1xuICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdCBzdXJlJyk7XG4gICAgICAgICB9XG4gICAgICAgfSk7XG4gICAgIH07XG5cbiAgICB2YXIgc2hvd1BhdGllbnRJZFBvcHVwQW5kUHJpbnQgPSBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgICB0ZW1wbGF0ZTogJzxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY2hhcnQuaWRcIj4nLFxuICAgICAgICB0aXRsZTogJ1BsZWFzZSBlbnRlciBhIHBhdGllbnQgaWQuJyxcbiAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgYnV0dG9uczogW1xuICAgICAgICAgIHsgdGV4dDogJ0NhbmNlbCcgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0OiAnPGI+UHJpbnQ8L2I+JyxcbiAgICAgICAgICAgIHR5cGU6ICdidXR0b24tcG9zaXRpdmUnLFxuICAgICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2hhcnQuaWQpIHtcbiAgICAgICAgICAgICAgICAvL2Rvbid0IGFsbG93IHRoZSB1c2VyIHRvIGNsb3NlIHVubGVzcyBoZSBlbnRlcnMgd2lmaSBwYXNzd29yZFxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNoYXJ0LmlkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH07XG4gICAgdmFyIHNob3dQYXRpZW50SWRQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICAgIHRlbXBsYXRlOiAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjaGFydC5pZFwiPicsXG4gICAgICAgIHRpdGxlOiAnUGxlYXNlIGVudGVyIGEgcGF0aWVudCBpZC4nLFxuICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgeyB0ZXh0OiAnQ2FuY2VsJyB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRleHQ6ICc8Yj5TYXZlPC9iPicsXG4gICAgICAgICAgICB0eXBlOiAnYnV0dG9uLXBvc2l0aXZlJyxcbiAgICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGlmICghJHNjb3BlLmNoYXJ0LmlkKSB7XG4gICAgICAgICAgICAgICAgLy9kb24ndCBhbGxvdyB0aGUgdXNlciB0byBjbG9zZSB1bmxlc3MgaGUgZW50ZXJzIHdpZmkgcGFzc3dvcmRcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jaGFydC5pZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIF9zaG93UGF0aWVudElkUG9wdXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5jaGFydC5pZCA9ICcnO1xuXG4gICAgICB2YXIgcGF0aWVudElkUG9wdXAgPSAkaW9uaWNQb3B1cC5zaG93KHtcbiAgICAgICAgdGVtcGxhdGU6ICc8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNoYXJ0LmlkXCI+JyxcbiAgICAgICAgdGl0bGU6ICdQbGVhc2UgZW50ZXIgYSBwYXRpZW50IGlkLicsXG4gICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdDYW5jZWwnIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGV4dDogJzxiPlNhdmU8L2I+JyxcbiAgICAgICAgICAgIHR5cGU6ICdidXR0b24tcG9zaXRpdmUnLFxuICAgICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2hhcnQuaWQpIHtcbiAgICAgICAgICAgICAgICAvL2Rvbid0IGFsbG93IHRoZSB1c2VyIHRvIGNsb3NlIHVubGVzcyBoZSBlbnRlcnMgd2lmaSBwYXNzd29yZFxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNoYXJ0LmlkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfV1cbiAgICAgIH0pO1xuXG4gICAgICBwYXRpZW50SWRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnVGFwcGVkIScsIHJlcyk7XG4gICAgICAgIGlmICghcmVzKXtcbiAgICAgICAgICAkc3RhdGUuZ28oJ3Jvb3QuaG9tZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGluaXRBZGRDaGFydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgfTtcbiAgXG4gICAgdmFyIGZvcm1GaWVsZERlZmF1bHRzID0gY29uc3RhbnRzLnZhbHVlcztcbiAgICAkc2NvcGUuY2hhcnQgPSB7fTtcbiAgICAkc2NvcGUub3B0aW9ucyA9IGNvbnN0YW50cy5vcHRpb25zO1xuICAgICRzY29wZS5yZXNwID0gY29uc3RhbnRzLnJlc3BpcmF0b3J5X2V4YW07XG4gICAgJHNjb3BlLmFiZG8gPSBjb25zdGFudHMuYWJkb21pbmFsX2V4YW07XG4gICAgJHNjb3BlLmhlZW50ID0gY29uc3RhbnRzLmhlZW50O1xuICAgICRzY29wZS5jYXJkaW92ID0gY29uc3RhbnRzLmNhcmRpb192YXNjdWxhcjtcbiAgICAkc2NvcGUubmV1cm8gPSBjb25zdGFudHMubmV1cm9sb2dpY2FsX2V4YW07XG5cbiAgICAkc2NvcGUucGh5c2ljYWxfZXhhbV9tb2R1bGVzID0ge1xuICAgICAgJ1Jlc3BpcmF0b3J5IEV4YW0nIDogY29uc3RhbnRzLnJlc3BpcmF0b3J5X2V4YW0sXG4gICAgICAnQWJkb21pbmFsIEV4YW0nIDogY29uc3RhbnRzLmFiZG9taW5hbF9leGFtLFxuICAgICAgJ0hlZW50JyA6IGNvbnN0YW50cy5oZWVudCxcbiAgICAgICdDYXJkaW8gVmFzY3VsYXInIDogY29uc3RhbnRzLmNhcmRpb192YXNjdWxhcixcbiAgICAgICdOZXVyb2xvZ2ljYWwgRXhhbScgOiBjb25zdGFudHMubmV1cm9sb2dpY2FsX2V4YW1cbiAgICB9O1xuXG4gICAgdmFyIGZvcm1WYWx1ZVNldHRlciA9IGZ1bmN0aW9uKGRhdGFPYmosIGZsYWcsIHRhZ1R5cGUpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhT2JqKVxuICAgICAgICBpZiAoZmxhZyA9PT0gJ3N0YXR1cycpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICd0ZXh0YXJlYScpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfSBlbHNlIGlmIChmbGFnID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgcmV0dXJuIG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICd0aW1lJykge1xuICAgICAgICAgIHJldHVybiBtb21lbnQoKS5mb3JtYXQoJ2hoOm1tOiBBJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFNhdmVkRmllbGRWYWx1ZSA9IGZ1bmN0aW9uKHNhdmVkVmFsdWVzLCBmbGFnLCB0YWdUeXBlLCBjYXRfbmFtZSl7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KHNhdmVkVmFsdWVzKSAmJiAhXy5pc0VtcHR5KHNhdmVkVmFsdWVzKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFnVHlwZSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzYXZlZFZhbHVlc1tmbGFnXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ1R5cGUgPT09ICdpbnB1dCcpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5waWNrKHNhdmVkVmFsdWVzLCBmbGFnKVtmbGFnXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ1R5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzYXZlZFZhbHVlc1tmbGFnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhdmVkVmFsdWVzW2ZsYWddO1xuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnVHlwZSA9PT0gJ3RleHRhcmVhJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNhdmVkVmFsdWVzW2ZsYWddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZWRWYWx1ZXNbZmxhZ107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybVZhbHVlU2V0dGVyKG51bGwsICdzdGF0dXMnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgc2V0TW9kdWxlU3RhdHVzID0gZnVuY3Rpb24oY2F0LCBzdGF0ZSwgcGFyYW1fZGF0YSwgZm4pe1xuICAgICAgICBpZiAoY2F0KSB7XG4gICAgICAgICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtW2NhdCsnX3N0YXR1cyddLiRtb2RlbFZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhwYXJhbV9kYXRhKSB8fCAhcGFyYW1fZGF0YT9cbiAgICAgICAgICAgICAgZm9ybVZhbHVlU2V0dGVyKG51bGwsICdzdGF0dXMnKSA6IGdldFNhdmVkRmllbGRWYWx1ZShwYXJhbV9kYXRhW2NhdF0sICdzdGF0dXMnKTtcbiAgICAgICAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm1bY2F0Kydfc3RhdHVzJ10uJCR3cml0ZU1vZGVsVG9TY29wZSgpO1xuICAgICAgICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybVtjYXQrJ19zdGF0dXMnXS4kcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzZXRDaGVja0JveFN0YXRlID0gZnVuY3Rpb24oZmllbGROYW1lLCBjYXQsIHBhcmFtX2RhdGEpe1xuICAgICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtW2ZpZWxkTmFtZS5uYW1lXS4kdmlld1ZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhwYXJhbV9kYXRhKSB8fCAhcGFyYW1fZGF0YT9cbiAgICAgICAgICBmb3JtVmFsdWVTZXR0ZXIoZm9ybUZpZWxkRGVmYXVsdHMucGh5c2ljYWxfZXhhbVtjYXRdLCAnY2hlY2tib3gnKSA6IFxuICAgICAgICAgIGdldFNhdmVkRmllbGRWYWx1ZShwYXJhbV9kYXRhW2NhdF0sIGZpZWxkTmFtZS5tb2RlbCwgJ2NoZWNrYm94Jyk7XG4gICAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm1bZmllbGROYW1lLm5hbWVdLiRyZW5kZXIoKTtcbiAgICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybVtmaWVsZE5hbWUubmFtZV0uJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgIH07XG4gICAgdmFyIHNldE5vdGVTdGF0ZSA9IGZ1bmN0aW9uKGZpZWxkLCBwYXJhbV9kYXRhKXtcbiAgICAgICAgaWYgKCRzY29wZS5FeGFtaW5hdGlvbkZvcm1bZmllbGQubmFtZV0pIHtcbiAgICAgICAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm1bZmllbGQubmFtZV0uJHZpZXdWYWx1ZSA9IGFuZ3VsYXIuaXNTdHJpbmcocGFyYW1fZGF0YSkgfHwgIXBhcmFtX2RhdGE/XG4gICAgICAgICAgICAgIGZvcm1WYWx1ZVNldHRlcihmb3JtRmllbGREZWZhdWx0cy5waHlzaWNhbF9leGFtW2ZpZWxkLm1vZHVsZV1bZmllbGQubmFtZV0sICd0ZXh0YXJlYScpIDogXG4gICAgICAgICAgICAgIGdldFNhdmVkRmllbGRWYWx1ZShwYXJhbV9kYXRhW2ZpZWxkLm1vZHVsZV0sIGZpZWxkLm1vZGVsLCAndGV4dGFyZWEnLCBmaWVsZC5tb2R1bGUpO1xuICAgICAgICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybVtmaWVsZC5uYW1lXS4kcmVuZGVyKCk7XG4gICAgICAgICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtW2ZpZWxkLm5hbWVdLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgc2V0RGVmYXVsdCA9IGZ1bmN0aW9uKHN0YXRlX2RhdGEpe1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5kYXRlLiR2aWV3VmFsdWUgPSBhbmd1bGFyLmlzU3RyaW5nKHN0YXRlX2RhdGEpIHx8ICFzdGF0ZV9kYXRhP1xuICAgICAgICAgIGZvcm1WYWx1ZVNldHRlcihmb3JtRmllbGREZWZhdWx0cywgJ2RhdGUnKSA6IGdldFNhdmVkRmllbGRWYWx1ZShzdGF0ZV9kYXRhLCAnZGF0ZScsICdpbnB1dCcpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS50aW1lLiR2aWV3VmFsdWUgPSBhbmd1bGFyLmlzU3RyaW5nKHN0YXRlX2RhdGEpIHx8ICFzdGF0ZV9kYXRhP1xuICAgICAgICAgIGZvcm1WYWx1ZVNldHRlcihmb3JtRmllbGREZWZhdWx0cywgJ3RpbWUnKSA6IGdldFNhdmVkRmllbGRWYWx1ZShzdGF0ZV9kYXRhLCAndGltZScsICdpbnB1dCcpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5kYXRlLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uZGF0ZS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnRpbWUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS50aW1lLiRjb21taXRWaWV3VmFsdWUoKTtcblxuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5pZC4kdmlld1ZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhzdGF0ZV9kYXRhKSB8fCAhc3RhdGVfZGF0YT9cbiAgICAgICAgICBmb3JtVmFsdWVTZXR0ZXIoZm9ybUZpZWxkRGVmYXVsdHMsICdpZCcsICdpbnB1dCcpIDogZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGEsICdpZCcsICdpbnB1dCcpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5pZC4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmlkLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gWydoZWVudCcsICdyZXNwJywgJ2FiZG8nLCAnY2FyZGlvdicsICduZXVybyddLCBsaXN0TGVuID0gbGlzdC5sZW5ndGg7IGk8bGlzdExlbjsgaSsrKXtcbiAgICAgICAgICAgIHNldE1vZHVsZVN0YXR1cygkc2NvcGVbbGlzdFtpXV0uY2F0X25hbWUsIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdChzdGF0ZV9kYXRhKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgc2F2ZWQgZGF0YSB3aGVuIGVkaXR0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGFbJHNjb3BlW2xpc3RbaV1dLmNhdF9uYW1lXSwgJ3N0YXR1cycsICdpbnB1dCcsICRzY29wZVtsaXN0W2ldXS5jYXRfbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbW9kdWxlOmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRNb2R1bGVTdGF0dXMobGlzdFtpXSwgJ3N0YXR1cycsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0YXRlX2RhdGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICAvLyByZXNwXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBcbiAgICAgICAgICAgIGxpc3QgPSBbXG4gICAgICAgICAgICAgICAge25hbWU6ICdnb29kX2JpbGF0X2FfZScsIG1vZGVsOiAnZ29vZEJpbGF0QV9FJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICd3aGVlemluZycsIG1vZGVsOiAnd2hlZXppbmcnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NyYWNrbGUnLCBtb2RlbDogJ2NyYWNrbGUnfVxuICAgICAgICAgICAgXSwgbGlzdExlbiA9IGxpc3QubGVuZ3RoOyBpPGxpc3RMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNldENoZWNrQm94U3RhdGUobGlzdFtpXSwgJ3Jlc3BpcmF0b3J5X2V4YW0nLCBzdGF0ZV9kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgLy8gaGVlbnRcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIFxuICAgICAgICAgICAgbGlzdCA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3Rocm9hdF9jbGVhcicsIG1vZGVsOiAndGhyb2F0Q2xlYXInfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3RtJywgbW9kZWw6ICd0bSd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnbmVja19zdXBwbGUnLCBtb2RlbDogJ25lY2tTdXBwbGUnfVxuICAgICAgICAgICAgXSwgbGlzdExlbiA9IGxpc3QubGVuZ3RoOyBpPGxpc3RMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNldENoZWNrQm94U3RhdGUobGlzdFtpXSwgJ2hlZW50Jywgc3RhdGVfZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIC8vIGFiZG9cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIFxuICAgICAgICAgICAgbGlzdCA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3NvZnRfYW5kX25vbl90ZW5kZXInLCBtb2RlbDogJ3NvZnRBbmROb25UZW5kZXInfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2JzcCcsIG1vZGVsOiAnYnNwJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdtYXNzJywgbW9kZWw6ICdtYXNzJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdvcmdhbm9tZWdhbHknLCBtb2RlbDogJ29yZ2Fub21lZ2FseSd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnbm9fc2lnbl9vZl9wZXJpdG9uaXRpcycsIG1vZGVsOiAnbm9TaWduT2ZQZXJpdG9uaXRpcyd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnZnBwX2FuZF9lcXVhbCcsIG1vZGVsOiAnZnBwQW5kRXF1YWwnfVxuICAgICAgICAgICAgXSwgbGlzdExlbiA9IGxpc3QubGVuZ3RoOyBpPGxpc3RMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNldENoZWNrQm94U3RhdGUobGlzdFtpXSwgJ2FiZG9taW5hbF9leGFtJywgc3RhdGVfZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FyZGlvXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBcbiAgICAgICAgICAgIGxpc3QgPSBbXG4gICAgICAgICAgICAgICAge25hbWU6ICdzMV9zMl9wcmVzZW50JywgbW9kZWw6ICdzMVMyUHJlc2VudCd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnczMnLCBtb2RlbDogJ3MzJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdzNCcsIG1vZGVsOiAnczQnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ211cm11cicsIG1vZGVsOiAnbXVybXVyJ30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdwcHAnLCBtb2RlbDogJ3BwcCd9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnanZkJywgbW9kZWw6ICdqdmQnfVxuICAgICAgICAgICAgXSwgbGlzdExlbiA9IGxpc3QubGVuZ3RoOyBpPGxpc3RMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNldENoZWNrQm94U3RhdGUobGlzdFtpXSwgJ2NhcmRpb192YXNjdWxhcicsIHN0YXRlX2RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gbmV1cm9cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIFxuICAgICAgICAgICAgbGlzdCA9IFtcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NlcmViZWxsdW1fZXhhbScsIG1vZGVsOiAnY2VyZWJlbGx1bUV4YW0nfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3Bvd2VyJywgbW9kZWw6ICdwb3dlcid9LFxuICAgICAgICAgICAgICAgIHtuYW1lOiAnc2Vuc2F0aW9uJywgbW9kZWw6ICdzZW5zYXRpb24nfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3RvbmUnLCBtb2RlbDogJ3RvbmUnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3JlZmxleCcsIG1vZGVsOiAncmVmbGV4J30sXG4gICAgICAgICAgICAgICAge25hbWU6ICdjbmlpX3hfaWknLCBtb2RlbDogJ2NuaWl4aWknfVxuICAgICAgICAgICAgXSwgbGlzdExlbiA9IGxpc3QubGVuZ3RoOyBpPGxpc3RMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNldENoZWNrQm94U3RhdGUobGlzdFtpXSwgJ25ldXJvbG9naWNhbF9leGFtJywgc3RhdGVfZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIC8vIG1vZHVsZSBub3Rlc1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgXG4gICAgICAgICAgICBsaXN0ID0gW1xuICAgICAgICAgICAgICAgIHtuYW1lOiAnaGVlbnRfbm90ZScsIG1vZGVsOiAnaGVlbnROb3RlJywgbW9kdWxlOiAnaGVlbnQnfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ3Jlc3BpcmF0b3J5X2V4YW1fbm90ZScsIG1vZGVsOiAncmVzcGlyYXRvcnlFeGFtTm90ZScsIG1vZHVsZTogJ3Jlc3BpcmF0b3J5X2V4YW0nfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2FiZG9taW5hbF9leGFtX25vdGUnLCBtb2RlbDogJ2FiZG9taW5hbEV4YW1Ob3RlJywgbW9kdWxlOiAnYWJkb21pbmFsX2V4YW0nfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ2NhcmRpb192YXNjdWxhcl9ub3RlJywgbW9kZWw6ICdjYXJkaW9WYXNjdWxhck5vdGUnLCBtb2R1bGU6ICdjYXJkaW9fdmFzY3VsYXInfSxcbiAgICAgICAgICAgICAgICB7bmFtZTogJ25ldXJvbG9naWNhbF9leGFtX25vdGUnLCBtb2RlbDogJ25ldXJvbG9naWNhbEV4YW1Ob3RlJywgbW9kdWxlOiAnbmV1cm9sb2dpY2FsX2V4YW0nfSxcbiAgICAgICAgICAgIF0sIGxpc3RMZW4gPSBsaXN0Lmxlbmd0aDsgaTxsaXN0TGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZXROb3RlU3RhdGUobGlzdFtpXSwgc3RhdGVfZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgIC8vIHNldCBub3RlcyBhbmQgcmVuZGVyXG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmhwaS4kdmlld1ZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhzdGF0ZV9kYXRhKSB8fCAhc3RhdGVfZGF0YT9cbiAgICAgICAgICBmb3JtVmFsdWVTZXR0ZXIoZm9ybUZpZWxkRGVmYXVsdHMuZXJfY2FyZCwgJ2hwaScsICd0ZXh0YXJlYScpIDogZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGEsICdocGknLCAndGV4dGFyZWEnKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ucG1oeC4kdmlld1ZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhzdGF0ZV9kYXRhKSB8fCAhc3RhdGVfZGF0YT9cbiAgICAgICAgICBmb3JtVmFsdWVTZXR0ZXIoZm9ybUZpZWxkRGVmYXVsdHMuZXJfY2FyZCwgJ3BtaHgnLCAndGV4dGFyZWEnKSA6IGdldFNhdmVkRmllbGRWYWx1ZShzdGF0ZV9kYXRhLCAncG1oeCcsICd0ZXh0YXJlYScpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5tZWRpY2F0aW9uLiR2aWV3VmFsdWUgPSBhbmd1bGFyLmlzU3RyaW5nKHN0YXRlX2RhdGEpIHx8ICFzdGF0ZV9kYXRhP1xuICAgICAgICAgIGZvcm1WYWx1ZVNldHRlcihmb3JtRmllbGREZWZhdWx0cy5lcl9jYXJkLCAnbWVkaWNhdGlvbicsICd0ZXh0YXJlYScpIDogZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGEsICdtZWRpY2F0aW9uJywgJ3RleHRhcmVhJyk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmFsbGVyZ2llcy4kdmlld1ZhbHVlID0gYW5ndWxhci5pc1N0cmluZyhzdGF0ZV9kYXRhKSB8fCAhc3RhdGVfZGF0YT9cbiAgICAgICAgICBmb3JtVmFsdWVTZXR0ZXIoZm9ybUZpZWxkRGVmYXVsdHMuZXJfY2FyZCwgJ2FsbGVyZ2llcycsICd0ZXh0YXJlYScpIDogZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGEsICdhbGxlcmdpZXMnLCAndGV4dGFyZWEnKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ubm90ZXMuJHZpZXdWYWx1ZSA9IGFuZ3VsYXIuaXNTdHJpbmcoc3RhdGVfZGF0YSkgfHwgIXN0YXRlX2RhdGE/XG4gICAgICAgICAgZm9ybVZhbHVlU2V0dGVyKGZvcm1GaWVsZERlZmF1bHRzLnBoeXNpY2FsX2V4YW0sICdub3RlcycsICd0ZXh0YXJlYScpIDogZ2V0U2F2ZWRGaWVsZFZhbHVlKHN0YXRlX2RhdGEsICdub3RlcycsICd0ZXh0YXJlYScpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5kaWFnbm9zaXMuJHZpZXdWYWx1ZSA9IGFuZ3VsYXIuaXNTdHJpbmcoc3RhdGVfZGF0YSkgfHwgIXN0YXRlX2RhdGE/XG4gICAgICAgICAgZm9ybVZhbHVlU2V0dGVyKGZvcm1GaWVsZERlZmF1bHRzLCAnZGlhZ25vc2lzJywgJ3RleHRhcmVhJykgOiBnZXRTYXZlZEZpZWxkVmFsdWUoc3RhdGVfZGF0YSwgJ2RpYWdub3NpcycsICd0ZXh0YXJlYScpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5kaXNjaGFyZ2VfaW5zdHJ1Y3Rpb24uJHZpZXdWYWx1ZSA9IGFuZ3VsYXIuaXNTdHJpbmcoc3RhdGVfZGF0YSkgfHwgIXN0YXRlX2RhdGE/XG4gICAgICAgICAgZm9ybVZhbHVlU2V0dGVyKGZvcm1GaWVsZERlZmF1bHRzLCAnZGlzY2hhcmdlX2luc3RydWN0aW9uJywgJ3RleHRhcmVhJykgOiBnZXRTYXZlZEZpZWxkVmFsdWUoc3RhdGVfZGF0YSwgJ2Rpc2NoYXJnZV9pbnN0cnVjdGlvbicsICd0ZXh0YXJlYScpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5ocGkuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5wbWh4LiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ubWVkaWNhdGlvbi4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmFsbGVyZ2llcy4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLm5vdGVzLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uZGlhZ25vc2lzLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uZGlzY2hhcmdlX2luc3RydWN0aW9uLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uaHBpLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ucG1oeC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLm1lZGljYXRpb24uJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5hbGxlcmdpZXMuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5ub3Rlcy4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmRpYWdub3Npcy4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmRpc2NoYXJnZV9pbnN0cnVjdGlvbi4kY29tbWl0Vmlld1ZhbHVlKCk7XG5cbiAgICAgIGRlZmVycmVkLnJlc29sdmUoJHNjb3BlLkV4YW1pbmF0aW9uRm9ybSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgdmFyIGNoZWNrQ2hhcnQgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmICghJHNjb3BlLmNoYXJ0LmlkIHx8ICRzY29wZS5jaGFydC5pZCA9PT0gJycpe1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ3JlcTppZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkc2NvcGUuY2hhcnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHZhciBhZGRDaGFydCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgYWxsQ2hhcnRzLnVuc2hpZnQoYW5ndWxhci5leHRlbmQoJHNjb3BlLmNoYXJ0LCB7XG4gICAgICAgIF9lcmlkOiBuZXcgRGF0ZSgpICsgJHNjb3BlLmNoYXJ0LmlkLFxuICAgICAgICBkYXRlOiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSxcbiAgICAgICAgdGltZTogbW9tZW50KCkuZm9ybWF0KCdoaDptbTogQScpXG4gICAgICB9KSk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGFsbENoYXJ0cyk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHZhciBmaWx0ZXJDaGFydHMgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGRlZmVycmVkRmlsdGVyZWRDaGFydHMgPSAkcS5kZWZlcigpO1xuICAgICAgYWxsQ2hhcnRzID0gZXJ1dGlscy5maWx0ZXJDaGFydHMoYWxsQ2hhcnRzLCAkc3RhdGVQYXJhbXMuZm9ybUlkKTtcbiAgICAgIGRlZmVycmVkRmlsdGVyZWRDaGFydHMucmVzb2x2ZShhbGxDaGFydHMpO1xuICAgICAgcmV0dXJuIGRlZmVycmVkRmlsdGVyZWRDaGFydHMucHJvbWlzZTtcbiAgICB9O1xuXG4gICAgdmFyIGluaXROZXdDaGFydCA9IGZ1bmN0aW9uKGNoYXJ0U3RhdHVzKXtcbiAgICAgIGNhY2hlLmdldExvY2FsRGF0YSgpLnRoZW4oZnVuY3Rpb24oc3VjY2Vzc0RhdGEpe1xuICAgICAgICBpZiAoIXN1Y2Nlc3NEYXRhKSB7XG4gICAgICAgICAgYWxsQ2hhcnRzID0gW11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGxDaGFydHMgPSBzdWNjZXNzRGF0YTtcbiAgICAgICAgfVxuICAgICAgfSkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdChjaGFydFN0YXR1cykpIHtcbiAgICAgICAgICAgIGFkZENoYXJ0KCkudGhlbihmdW5jdGlvbih1cGRhdGVkQ2hhcnRzKXtcbiAgICAgICAgICAgICAgY2FjaGUud3JpdGVMb2NhbERhdGEodXBkYXRlZENoYXJ0cykudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9Ib21lKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hvd1BhdGllbnRJZFBvcHVwKCkudGhlbihmdW5jdGlvbihwb3BVcFJlc3VsdCl7XG4gICAgICAgICAgICBpZiAoIXBvcFVwUmVzdWx0KXtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdyb290LmhvbWUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFkZENoYXJ0KCkudGhlbihmdW5jdGlvbihuZXdDaGFydHNBcnJheSl7XG4gICAgICAgICAgICAgICAgY2FjaGUud3JpdGVMb2NhbERhdGEobmV3Q2hhcnRzQXJyYXkpLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG9Ib21lKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgICB2YXIgaW5pdEVkaXRDaGFydCA9IGZ1bmN0aW9uKCl7XG4gICAgICBjYWNoZS5nZXRMb2NhbERhdGEoKS50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3NEYXRhKXtcbiAgICAgICAgaWYgKCFzdWNjZXNzRGF0YSkge1xuICAgICAgICAgIGFsbENoYXJ0cyA9IFtdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxsQ2hhcnRzID0gc3VjY2Vzc0RhdGE7XG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGFsbENoYXJ0cywgZnVuY3Rpb24oY2hhcnQsIGtleSl7XG4gICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5mb3JtSWQgPT09IGNoYXJ0LmlkKSB7XG4gICAgICAgICAgICBzZXREZWZhdWx0KGNoYXJ0KS50aGVuKGZ1bmN0aW9uKGZvcm1TY29wZSl7XG4gICAgICAgICAgICAgIGZvcm1TY29wZS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgICAgZm9ybVNjb3BlLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3VycmVudENoYXJ0ID0gY2hhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdmFyIGluaXRTYXZlQ2hhcnQgPSBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coJy0tLWluaXRpYWxpemluZyBTYXZlQ2hhcnQtLS0nKVxuICAgICAgaWYgKCRzdGF0ZS5pcygncm9vdC5mb3JtJykpe1xuICAgICAgICBjb25zb2xlLmxvZygnLS0tc3RhdGUuaXMgcm9vdC5mb3JtOiBjcmVhdGluZyBuZXcgY2hhcnQtLS0nKVxuICAgICAgICBjaGVja0NoYXJ0KCkudGhlbihmdW5jdGlvbihjaGFydFN0YXR1cyl7XG4gICAgICAgICAgY29uc29sZS5sb2coJy0tLWNoYXJ0U3RhdHVzOnZhbGlkID4gbW92aW5nIG9uLi4tLS0nKVxuICAgICAgICAgIGluaXROZXdDaGFydChjaGFydFN0YXR1cyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgICAgY29uc29sZS5sb2coJy0tLWNoYXJ0U3RhdHVzOmludmFsaWQgPiBtb3Zpbmcgb24uLi0tLScpXG4gICAgICAgICAgaW5pdE5ld0NoYXJ0KHJlYXNvbilcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnLS0tc3RhdGUuaXMgcm9vdC5lZGl0OiBwcm9jZXNzaW5nIG5ldyBmb3JtLS0tJylcbiAgICAgICAgZmlsdGVyQ2hhcnRzKCkudGhlbihmdW5jdGlvbihuZXdDaGFydHNBcnJheSl7XG4gICAgICAgICAgYWxsQ2hhcnRzID0gbmV3Q2hhcnRzQXJyYXk7XG4gICAgICAgICAgYWRkQ2hhcnQoKS50aGVuKGZ1bmN0aW9uKHVwZGF0ZWRDaGFydHMpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLWFkZGluZyBuZXcgY2hhcnQuLi0tLScpXG4gICAgICAgICAgICBjYWNoZS53cml0ZUxvY2FsRGF0YSh1cGRhdGVkQ2hhcnRzKS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS1uZXcgY2hhcnQgYWRkIHRvIGxvY2FsIHN0b3JlIHN1Y2Nlc3NmdWxseS4uLi0tLScpXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS1hbGwgY2xlYXIgPiBnb2luZyBiYWNrIHRvIGhvbWUuLS0tJylcbiAgICAgICAgICAgICAgbmF2aWdhdGVUb0hvbWUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gSU5JVCBQUklOVFxuICAgIHZhciBwcmVwUGFnZVRvUHJpbnQgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5kYXRlLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uZGF0ZS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnRpbWUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS50aW1lLiRjb21taXRWaWV3VmFsdWUoKTtcblxuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5oZWVudF9ub3RlLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uaGVlbnRfbm90ZS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnJlc3BpcmF0b3J5X2V4YW1fbm90ZS4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnJlc3BpcmF0b3J5X2V4YW1fbm90ZS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmFiZG9taW5hbF9leGFtX25vdGUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5hYmRvbWluYWxfZXhhbV9ub3RlLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uY2FyZGlvX3Zhc2N1bGFyX25vdGUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5jYXJkaW9fdmFzY3VsYXJfbm90ZS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLm5ldXJvbG9naWNhbF9leGFtX25vdGUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5uZXVyb2xvZ2ljYWxfZXhhbV9ub3RlLiRjb21taXRWaWV3VmFsdWUoKTtcblxuXG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmlkLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uaWQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuXG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmdvb2RfYmlsYXRfYV9lLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uZ29vZF9iaWxhdF9hX2UuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS53aGVlemluZy4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLndoZWV6aW5nLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uY3JhY2tsZS4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmNyYWNrbGUuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuXG4gICAgICAvL3JlbmRlciBjYXJkaW8gdmFsdWVzXG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnMxX3MyX3ByZXNlbnQuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5zMV9zMl9wcmVzZW50LiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uczMuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5zMy4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnM0LiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uczQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5wcHAuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5wcHAuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5tdXJtdXIuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5tdXJtdXIuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5qdmQuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5qdmQuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuXG4gICAgICAvLyByZW5kZXIgYWJkb1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5zb2Z0X2FuZF9ub25fdGVuZGVyLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uc29mdF9hbmRfbm9uX3RlbmRlci4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmJzcC4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmJzcC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLmZwcF9hbmRfZXF1YWwuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5mcHBfYW5kX2VxdWFsLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ub3JnYW5vbWVnYWx5LiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ub3JnYW5vbWVnYWx5LiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ubm9fc2lnbl9vZl9wZXJpdG9uaXRpcy4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLm5vX3NpZ25fb2ZfcGVyaXRvbml0aXMuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuXG4gICAgICAvLyByZW5kZXIgaGVlbnRcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0udGhyb2F0X2NsZWFyLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0udGhyb2F0X2NsZWFyLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0udG0uJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS50bS4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLm5lY2tfc3VwcGxlLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ubmVja19zdXBwbGUuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuXG4gICAgICAvLyBzZXQgbmV1cm9cbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uY2VyZWJlbGx1bV9leGFtLiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0uY2VyZWJlbGx1bV9leGFtLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ucG93ZXIuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS5wb3dlci4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnNlbnNhdGlvbi4kcmVuZGVyKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnNlbnNhdGlvbi4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICAkc2NvcGUuRXhhbWluYXRpb25Gb3JtLnRvbmUuJHJlbmRlcigpO1xuICAgICAgJHNjb3BlLkV4YW1pbmF0aW9uRm9ybS50b25lLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ucmVmbGV4LiRyZW5kZXIoKTtcbiAgICAgICRzY29wZS5FeGFtaW5hdGlvbkZvcm0ucmVmbGV4LiRjb21taXRWaWV3VmFsdWUoKTtcblxuICAgICAgdmFyIHBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1cIik7XG4gICAgICByZXR1cm4gcGFnZTtcbiAgICB9O1xuXG4gICAgdmFyIHByaW50RG9uZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBhbmd1bGFyLmZvckVhY2goJGVsZW0ucGFyZW50KCkuY2hpbGRyZW4oKSwgZnVuY3Rpb24odmFsdWUsIGtleSl7XG4gICAgICAgIGlmIChrZXkgPj0gMil7XG4gICAgICAgICAgY29uc29sZS5sb2codmFsdWUucmVtb3ZlKCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICRzY29wZS5jaGFydC5wcmludGVkID0gdHJ1ZTtcbiAgICAgIGluaXRTYXZlQ2hhcnQoKTtcbiAgICB9O1xuXG4gICAgdmFyIGluaXRQcmludCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgcHJpbnRQYWdlID0gcHJlcFBhZ2VUb1ByaW50KCk7XG5cbiAgICAgIHZhciBwYXJlbnRFbGVtID0gYW5ndWxhci5lbGVtZW50KCRlbGVtWzBdLnBhcmVudE5vZGUpO1xuICAgICAgdmFyIGZvcm1FbGVtID0gYW5ndWxhci5lbGVtZW50KCRlbGVtLnBhcmVudCgpKTtcbiAgICAgIHdoaWxlICgkZWxlbS5wYXJlbnQoKVswXS5jaGlsZHJlbi5sZW5ndGggPD0gNikge1xuICAgICAgICBwYXJlbnRFbGVtLmFwcGVuZChmb3JtRWxlbS5odG1sKCkpO1xuICAgICAgfVxuXG4gICAgICBpb25pYy5QbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMucHJpbnRlci5wcmludChwcmludFBhZ2UsICdlci1waWQtJyArICRzY29wZS5jaGFydC5pZCB8fCAncHJpbnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBhbGVydCgncHJpbnRpbmcgZmluaXNoZWQgb3IgY2FuY2VsZWQnKVxuICAgICAgICAgICAgcHJpbnREb25lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLiRvbignUGFnZUV2ZW50OlByaW50JywgZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgICAvLyBjb25zb2xlLmxvZygnRXZlbnRAZXJGb3JtOjogUGFnZUV2ZW50OlByaW50JylcbiAgICAgIGNoZWNrQ2hhcnQoKS50aGVuKGZ1bmN0aW9uKGNoYXJ0KXtcbiAgICAgICAgaW5pdFByaW50KCk7XG4gICAgICAgIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLCBpbml0UHJpbnQsIGZhbHNlKTtcbiAgICAgICAgfSxmdW5jdGlvbihjaGVja0ZhaWxEYXRhKXtcbiAgICAgICAgICAgIHNob3dQYXRpZW50SWRQb3B1cEFuZFByaW50KCkudGhlbihmdW5jdGlvbihwb3B1cFJlc3VsdCl7XG4gICAgICAgICAgICAgIGlmICghcG9wdXBSZXN1bHQpe1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluaXRQcmludCgpO1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLCBpbml0UHJpbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAkc2NvcGUuJG9uKCdQYWdlRXZlbnQ6U2F2ZUNoYXJ0JywgZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgICBjb25zb2xlLmxvZygnRXZlbnRAZXJGb3JtOjogUGFnZUV2ZW50OlNhdmVDaGFydCcpXG4gICAgIGluaXRTYXZlQ2hhcnQoKTtcbiAgICB9KTtcbiAgICAkc2NvcGUuJG9uKCdQYWdlRXZlbnQ6VXBkYXRlQ2hhcnQnLCBmdW5jdGlvbihldmVudCwgYXJncyl7XG4gICAgIC8vIGNvbnNvbGUubG9nKCdFdmVudEBlckZvcm06OiBQYWdlRXZlbnQ6VXBkYXRlQ2hhcnQnKVxuICAgICAgaWYgKCEkc2NvcGUuRXhhbWluYXRpb25Gb3JtLiRpbnZhbGlkICYmICRzdGF0ZS5pcygncm9vdC5lZGl0Jykpe1xuICAgICAgICAgIC8vIGlmIGVkaXR0aW5nIGN1cnJlbnQgY2hhcnQgYW5kIGZvcm0gYmVjYW1lIGludmFsaWQgKGlkIGlzIG1pc3NpbmcpIDpcbiAgICAgICAgICBpbml0U2F2ZUNoYXJ0KClcbiAgICAgIH1cbiAgICB9KTtcbiAgICAkc2NvcGUuJG9uKCdQYWdlRXZlbnQ6R29Ib21lJywgZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgICAvLyBjb25zb2xlLmxvZygnRXZlbnRAZXJGb3JtOjogUGFnZUV2ZW50OkdvSG9tZScpXG5cbiAgICAgaWYgKCRzY29wZS5FeGFtaW5hdGlvbkZvcm0uJHByaXN0aW5lICYmICEkc2NvcGUuRXhhbWluYXRpb25Gb3JtLiRkaXJ0eSl7XG4gICAgICAgLy8gaWYgZm9ybSBpcyB1bnRvdWNoZWQgYW5kIHVzZXIgZGVjaWRlZCBub3QgdG8gY29udGludWUgZmlsbGluZyB0aGUgZm9ybTogXG4gICAgICAgJHN0YXRlLmdvKCdyb290LmhvbWUnKTtcbiAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5FeGFtaW5hdGlvbkZvcm0uJGludmFsaWQgJiYgJHN0YXRlLmlzKCdyb290LmVkaXQnKSl7XG4gICAgICAgIC8vIGlmIGVkaXR0aW5nIGN1cnJlbnQgY2hhcnQgYW5kIGZvcm0gYmVjYW1lIGludmFsaWQgKGlkIGlzIG1pc3NpbmcpIDpcbiAgICAgICAgaW5pdFNhdmVDaGFydCgpXG4gICAgICB9IGVsc2UgaWYgKCRzY29wZS5FeGFtaW5hdGlvbkZvcm0uJGludmFsaWQgJiYgJHN0YXRlLmlzKCdyb290LmZvcm0nKSl7XG4gICAgICAgIC8vIGlmIGNyZWF0aW5nIG5ldyBjaGFydCBhbmQgdXNlciBmb3Jnb3QgdG8gcHJvdmlkZSBwYXRpZW50IGlkOlxuICAgICAgICBpbml0U2F2ZUNoYXJ0KClcbiAgICAgIH1cbiAgICB9KTtcbiAgICAkc2NvcGUuJG9uKCdQYWdlRXZlbnQ6aXNBZGQnLCBmdW5jdGlvbigpe1xuICAgICAvLyBjb25zb2xlLmxvZygnUGFnZUV2ZW50OmlzQWRkJyk7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIHNldERlZmF1bHQoJ2RlZmF1bHQnKS50aGVuKGZ1bmN0aW9uKGZvcm1TY29wZSl7XG4gICAgICAgICAgICBmb3JtU2NvcGUuJHNldFByaXN0aW5lKCk7XG4gICAgICAgICAgICBmb3JtU2NvcGUuJHNldFVudG91Y2hlZCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9KTtcbiAgICAkc2NvcGUuJG9uKCdQYWdlRXZlbnQ6aXNFZGl0JywgZnVuY3Rpb24oKXtcbiAgICAgLy8gY29uc29sZS5sb2coJ1BhZ2VFdmVudDppc0VkaXQnKTtcbiAgICAgIGluaXRFZGl0Q2hhcnQoKTtcbiAgICB9KTtcblxuXG4gIH07XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ0VSQ2hhcnQnKS5kaXJlY3RpdmUoJ2VySXRlbUlzcHJpbnRlZCcsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBmbikge1xuICAgICAgICAgICAgaWYgKGF0dHJzLmVySXRlbUlzcHJpbnRlZCkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQuY2hpbGRyZW4oKVswXSk7XG4gICAgICAgICAgICAgICAgY1swXS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JlaWdlJztcbiAgICAgICAgICAgIH1cblx0XHR9XG5cdH07XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==